var searchFunc=function(t,p,e,a,i){$.ajax({url:t,dataType:"json",success:function(t){var n,r,s=t,t=document.getElementById(a);t&&(n=document.getElementById(i),r=document.getElementById(e),t.addEventListener("input",function(){var o=[],h=function(t){for(var e,n=[],r=0;r<t.length;r++)for(e=r+1;e<t.length+1;e++)n.push(t.slice(r,e).join(" "));return n}(this.value.trim().toLowerCase().split(" ")).sort(function(t,e){return e.split(" ").length-t.split(" ").length});if(n.innerHTML="",this.value.trim().length<=0)r.setAttribute("searching","false");else if(r.setAttribute("searching","true"),s.forEach(function(t){var e,n,r,s,a,i,c,l,u;t.content?.trim().length&&(e=0,p&&!t.path.includes(p)||(l=t.title?.trim()||"Untitled",n=l.toLowerCase(),u=t.content,r=u.toLowerCase(),t=t.path.startsWith("//")?t.path.slice(1):t.path,i=a=s=-1,""!==u&&h.forEach(function(t){s=n.indexOf(t),a=r.indexOf(t),(0<=s||0<=a)&&(e+=1,a<0&&(a=0),i<0&&(i=a))}),0<e&&((c={}).rank=e,c.str="<li><a href='"+t+"'><span class='search-result-title'>"+l+"</span>",0<=i&&(t=i+80,(t=0==(l=(l=i-20)<0?0:l)?100:t)>u.length&&(t=u.length),u=u.substring(l,t),l=new RegExp(h.join("|"),"gi"),u=u.replace(l,function(t){return'<span class="search-keyword">'+t+"</span>"}),c.str+='<p class="search-result-content">'+u+"...</p>"),c.str+="</a></li>",o.push(c))))}),o.length){o.sort(function(t,e){return e.rank-t.rank});for(var t='<ul class="search-result-list">',e=0;e<o.length;e++)t+=o[e].str;n.innerHTML=t+="</ul>"}}))}})};utils.jq(()=>{var t,n=$("input#search-input");0!=n.length&&(t=document.querySelector("div#search-result"),n.focus(function(){var t=ctx.search.path,e=(t.startsWith("/")&&(t=t.substring(1)),t=ctx.root+t,n.attr("data-filter")||"");searchFunc(t,e,"search-wrapper","search-input","search-result")}),n.keydown(function(t){13==t.which&&t.preventDefault()}),new MutationObserver(function(t,e){1==t.length&&(t[0].addedNodes.length?$(".search-wrapper").removeClass("noresult"):t[0].removedNodes.length&&$(".search-wrapper").addClass("noresult"))}).observe(t,{childList:!0}))});