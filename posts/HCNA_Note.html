<!DOCTYPE html><html><head><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-144334903-2","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9318335501008303" crossorigin="anonymous"></script><meta charset="utf-8"><meta name="sogou_site_verification" content="ZjNrHOGj7T"><link rel="canonical" href="https://ivitan.com/posts/HCNA_Note.html"><title>HCNA NOTE - 楊咩阿</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#f45a8d"><meta name="keywords" content="Linux"><meta name="baidu-site-verification" content="code-BrguQlsdqJ"><meta name="description" content="HCNA 学习笔记网络整体架构企业网络企业网络：包括小型办公室、教育、政府、银行等行业或机构企业网络远程互联：总公司与分公司使用广域网链路(WAN)互联"><meta property="og:type" content="article"><meta property="og:title" content="HCNA NOTE"><meta property="og:url" content="https://ivitan.com/posts/HCNA_Note.html"><meta property="og:site_name" content="楊咩阿"><meta property="og:description" content="HCNA 学习笔记网络整体架构企业网络企业网络：包括小型办公室、教育、政府、银行等行业或机构企业网络远程互联：总公司与分公司使用广域网链路(WAN)互联"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/wangluo.jpg"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/iwljgt.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/cty.jpg"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517124923.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/shujufengzhuang.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/MacAddress.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517125147.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517125222.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/ndLwcGxUgrkJhCq.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/R1GazuNob9qBnwY.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517125412.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/YGBtav3hmNwMCDi.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/s25D4BLpFRfkITJ.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/xzUOeirdFZqsyjh.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/iNvgm3yKU5ehRZn.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/ScY1AUKshDLRvx4.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/Sv8LD5ZQUioz7lw.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/xD3bcuXPFsLTiSZ.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/6y7Jc51WoUZINP8.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/RLPUMe4njqVylga.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/B7dYZRDnW2tQmc6.png"><meta property="article:published_time" content="2019-10-20T02:12:16.000Z"><meta property="article:modified_time" content="2021-08-19T15:45:31.000Z"><meta property="article:author" content="VITAN"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/wangluo.jpg"><link rel="alternate" type="application/atom+xml" title="楊咩阿" href="/xml/atom.xml"><link rel="shortcut icon" href="/img/favicon.svg"><link rel="stylesheet" href="/css/style.css?v=1.8.5"><script>window.lazyScripts=[]</script><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.png)"><div class="brand"><a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/ivitan.png"></a><hgroup class="introduce"><h5 class="nickname">VITAN</h5><a href="mailto:vitanyeung@gmail.com" title="vitanyeung@gmail.com" class="mail">vitanyeung@gmail.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> 首页</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> 归档</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> 标签</a></li><li class="waves-block waves-effect"><a href="/about"><i class="icon icon-lg icon-user"></i> 关于</a></li><li class="waves-block waves-effect"><a href="https://github.com/ivitan" target="_blank"><i class="icon icon-lg icon-github-alt"></i> Github</a></li></ul></div></div></aside><main id="main"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">HCNA NOTE</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i> </a><input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">HCNA NOTE</h1><h5 class="subtitle"><time datetime="2019-10-20T02:12:16.000Z" itemprop="datePublished" class="page-time">2019-10-20</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a></li></ul></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#网络整体架构"><span class="post-toc-number">1.</span> <span class="post-toc-text">网络整体架构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#企业网络"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">企业网络</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#企业网络基本架构"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">企业网络基本架构</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#网络基本管理及模拟器使用"><span class="post-toc-number">2.</span> <span class="post-toc-text">网络基本管理及模拟器使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#常用的传输介质"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">常用的传输介质</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#双绞线-8芯"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">双绞线(8芯)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#光纤"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">光纤</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#串口电缆"><span class="post-toc-number">2.1.3.</span> <span class="post-toc-text">串口电缆</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ENSP-模拟器"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">ENSP 模拟器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#冲突域"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">冲突域</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#熟悉以及远程管理设备的实验"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">熟悉以及远程管理设备的实验</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#网络各种分层结构"><span class="post-toc-number">3.</span> <span class="post-toc-text">网络各种分层结构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#网络分层基础"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">网络分层基础</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#OSI-开放式系统互联模型-七层模型"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">OSI(开放式系统互联模型) 七层模型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#TCP-IP-工业标准"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">TCP&#x2F;IP(工业标准)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据封装"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">数据封装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#TCP与UDP的概念相互的区别及优劣"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">TCP与UDP的概念相互的区别及优劣</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#VRP-的操作"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">VRP 的操作</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Ehternet基础"><span class="post-toc-number">4.</span> <span class="post-toc-text">Ehternet基础</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#以太网帧"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">以太网帧</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#以太网MAC地址"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">以太网MAC地址</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#MAC分类"><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">MAC分类</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#以太网封装格式"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">以太网封装格式</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#以太网IP地址网络基础和FTP"><span class="post-toc-number">5.</span> <span class="post-toc-text">以太网IP地址网络基础和FTP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IP编制"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">IP编制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#IP编制组成"><span class="post-toc-number">5.1.1.</span> <span class="post-toc-text">IP编制组成</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#以太网IPv4基础和分类"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">以太网IPv4基础和分类</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#网络的进制"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">网络的进制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IPv4地址分类"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">IPv4地址分类</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#地址范围"><span class="post-toc-number">5.4.1.</span> <span class="post-toc-text">地址范围</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#IP地址类型"><span class="post-toc-number">5.4.2.</span> <span class="post-toc-text">IP地址类型</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#子网掩码-subset-mask"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">子网掩码(subset mask)</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#地址规划"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">地址规划</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#有类IP编址的缺陷"><span class="post-toc-number">5.7.</span> <span class="post-toc-text">有类IP编址的缺陷</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#划分子网方法"><span class="post-toc-number">5.8.</span> <span class="post-toc-text">划分子网方法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#计算"><span class="post-toc-number">5.9.</span> <span class="post-toc-text">计算</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#科学但麻烦的方法"><span class="post-toc-number">5.9.1.</span> <span class="post-toc-text">科学但麻烦的方法</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#快速但需要检验的方法"><span class="post-toc-number">5.10.</span> <span class="post-toc-text">快速但需要检验的方法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CIDR-无类域间路由"><span class="post-toc-number">5.11.</span> <span class="post-toc-text">CIDR 无类域间路由</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#网关-Gateway"><span class="post-toc-number">5.12.</span> <span class="post-toc-text">网关(Gateway)</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#实施FTP"><span class="post-toc-number">5.13.</span> <span class="post-toc-text">实施FTP</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#以太网IP头部概述和VRP相关讲解"><span class="post-toc-number">6.</span> <span class="post-toc-text">以太网IP头部概述和VRP相关讲解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IP包头的重要字段"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">IP包头的重要字段</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#VRP基础-应用"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">VRP基础(应用)</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#VRP-通用路由平台-的FTP应用"><span class="post-toc-number">7.</span> <span class="post-toc-text">VRP(通用路由平台)的FTP应用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#设备初始化启动"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">设备初始化启动</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#命令行视图"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">命令行视图</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#命令行功能"><span class="post-toc-number">7.3.</span> <span class="post-toc-text">命令行功能</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#命令行在线帮助"><span class="post-toc-number">7.4.</span> <span class="post-toc-text">命令行在线帮助</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#命令等级"><span class="post-toc-number">7.5.</span> <span class="post-toc-text">命令等级</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#用户界面"><span class="post-toc-number">7.6.</span> <span class="post-toc-text">用户界面</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#CTR-快捷键"><span class="post-toc-number">7.7.</span> <span class="post-toc-text">CTR 快捷键</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置标题消息"><span class="post-toc-number">7.8.</span> <span class="post-toc-text">配置标题消息</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#文件系统管理"><span class="post-toc-number">8.</span> <span class="post-toc-text">文件系统管理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基本命令"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">基本命令</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置文件管理"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">配置文件管理</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#存储设备"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">存储设备</span></a></li></ol></li></ol></nav></aside><article id="post-HCNA_Note" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">HCNA NOTE</h1><div class="post-meta"><time class="post-time" title="2019-10-20 10:12:16" datetime="2019-10-20T02:12:16.000Z" itemprop="datePublished"><i class="icon icon-calendar"></i> 2019-10-20</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a></li></ul><span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none"><i class="icon icon-eye" style="padding:0 .3em"></i><span id="busuanzi_value_page_pv"></span></span></div><div class="post-content" id="post-content" itemprop="postContent"><p>HCNA 学习笔记</p><h1 id="网络整体架构"><a href="#网络整体架构" class="headerlink" title="网络整体架构"></a>网络整体架构</h1><h2 id="企业网络"><a href="#企业网络" class="headerlink" title="企业网络"></a>企业网络</h2><p>企业网络：包括小型办公室、教育、政府、银行等行业或机构</p><ul><li>企业网络远程互联：</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/wangluo.jpg" alt=""></div><div class="image-caption"></div></figure><p>总公司与分公司使用广域网链路(WAN)互联</p><a id="more"></a><h3 id="企业网络基本架构"><a href="#企业网络基本架构" class="headerlink" title="企业网络基本架构"></a>企业网络基本架构</h3><ol><li>小型企业：通常采用扁平网络结构，扩展能力低。</li><li>大型企业：通常采用层次化结构以支撑网络的扩展和用户的增长。</li></ol><ul><li>结构图(左小右大)</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/iwljgt.png" alt=""></div><div class="image-caption"></div></figure><h1 id="网络基本管理及模拟器使用"><a href="#网络基本管理及模拟器使用" class="headerlink" title="网络基本管理及模拟器使用"></a>网络基本管理及模拟器使用</h1><h2 id="常用的传输介质"><a href="#常用的传输介质" class="headerlink" title="常用的传输介质"></a>常用的传输介质</h2><p>双绞线、光纤、Radio(蓝牙等)、同轴电缆(几乎淘汰)</p><h3 id="双绞线-8芯"><a href="#双绞线-8芯" class="headerlink" title="双绞线(8芯)"></a>双绞线(8芯)</h3><p>有多种类型，不同类型传输速度不同和，超5类、6类最常用。RJ-45水晶头</p><p><code>568A标准</code> 白绿，绿，白橙，蓝，白蓝，橙，白棕，棕<br><code>568B标准</code> 白橙，橙，白绿，蓝，白蓝，绿，白棕，棕</p><p><code>交叉线</code> 一头采用568A标准，一头采用568B标准<br><code>平行线/直通线</code> 两头采用同样的标准，同为568A标准或568B标准</p><p>相同设备使用交叉线，不同设备使用直通线，现在很多设备都有自适应。</p><h3 id="光纤"><a href="#光纤" class="headerlink" title="光纤"></a>光纤</h3><p><code>单模光纤(S)</code> 颜色多为黄色，连接头多为蓝色或绿色，只能传输一种模式的广。不存在模间色散，适用于长距离高速传输。<br><code>多模光纤(M)</code> 线缆颜色千兆多位橙色、万兆多为水蓝色，连接头多位灰白色，允许不同模式的光在一根光纤上传输，由于模间色散较大而导致信号脉冲展宽严重，因此主要用于局域网的短距离传输。</p><ul><li>区别</li></ul><p>主要在传输距离，单模长距离，多模短距离。单模和多模差异在传输距离。洲际的传输使用的是 <code>光缆</code>，不是光纤</p><ul><li>常用光纤连接器</li></ul><p>ST，FC，SC，LC连接器。连接器有帽子，要拿掉才能连接</p><h3 id="串口电缆"><a href="#串口电缆" class="headerlink" title="串口电缆"></a>串口电缆</h3><p>网络通信中常用和推荐的串口电缆标准为 RS-232，但传输速率有限仅为6米。<br>RS-422和RS-485的传输距离可达1200米。接头常用V.35(80年代淘汰)，但仍在帧中继、ATM等传统网络上使用。<br>V.24为RS-232标准的欧洲版，RS-232本身没有定义接头标准，RS-232逐渐被FireWire，USB等取代。新产品和设备已经普遍使用USB标准。</p><h2 id="ENSP-模拟器"><a href="#ENSP-模拟器" class="headerlink" title="ENSP 模拟器"></a>ENSP 模拟器</h2><p>关闭Windows防火墙，不要装各种管家。<br>尽量少运行软件，可能会干扰 virtunal-box。<br>重新注册要关闭ENSP，个人文件夹下的.VirtualBox彻底删除。注册完毕之后关闭ENSP然后再开启。</p><h2 id="冲突域"><a href="#冲突域" class="headerlink" title="冲突域"></a>冲突域</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/cty.jpg" alt=""></div><div class="image-caption"></div></figure><ul><li>应用场景</li></ul><p>多点接入网络(MA),如交换机(Switch)</p><ul><li>冲突域与半双工搭配</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517124923.png" alt=""></div><div class="image-caption"></div></figure><p><code>单工</code> 简单的说就是一方只能发信息，另一方则只能收信息，通信是单向的。<br><code>半双工</code> 比单工先进一点，就是双方都能发信息，但同一时间则只能一方发信息。<br><code>全双工</code> 比半双工再先进一点，就是双方不仅都能发信息，而且能够同时发送。</p><ul><li>共同点</li></ul><p>半双工和全双工都支持双向数据传输。</p><blockquote><p>共享式网络中，不同的主机同时发送数据时，就会产生信号冲突的问题，解决方法一般是：采用<code>载波侦听多路访问/冲突检测技术(CAMA/CD)</code> 的基本工作过程如下</p></blockquote><ol><li>终端设备不同地检测共享网路的状态。如果线路空闲，则可以发送数据，线路不空闲，则等待一段时间后据徐检测(延时时间由退避算法决定)。</li><li>如有另一个设备同时发送数据，两个设备发送的数据会产生冲突。</li><li>终端设备检测到冲突之后，马上停止发送自己的数据，并发送特俗阻塞信息，以强化冲突信号，使线路上的其他站点能够尽早检测冲突。</li><li>终端设备检测到冲突后，等待一段时间后再将进行数据发送(延时时间由退避算法决定)。</li></ol><p>CSMA/CD 的工作原理：先听后发，边发边听，冲突停发，随机延迟后重发。</p><p>Q: 用串行线路能否构建MA网络<br>A: 肯定可以</p><p>NBMA(非广播多路访问)：物理架构(ATM、帧中继网络)—-NMBMA(网络设计)—VPN(DSVPN)。</p><h2 id="熟悉以及远程管理设备的实验"><a href="#熟悉以及远程管理设备的实验" class="headerlink" title="熟悉以及远程管理设备的实验"></a>熟悉以及远程管理设备的实验</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">interface GigabitEnternet0/0/0/0 <span class="comment"># 进入接口</span></span><br><span class="line">ip address 10.1.1.1 255.255.255.0</span><br></pre></td></tr></table></figure><p>常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">sysname R1 <span class="comment"># 修改设备名字</span></span><br><span class="line">ip address 10.1.1.1.7 <span class="comment"># 配置IP地址</span></span><br><span class="line">ip address mask  10.1.1.1.7 24 <span class="comment"># 配置IP地址和掩码</span></span><br><span class="line">diaplay this <span class="comment"># 显示当前模式</span></span><br><span class="line">dis ip int bri <span class="comment"># 查看接口开启情况</span></span><br><span class="line">undo shutdown <span class="comment"># </span></span><br><span class="line">q <span class="comment"># 退出</span></span><br><span class="line"></span><br><span class="line">user-interface <span class="comment"># 用户接口</span></span><br><span class="line">user-interface ？ <span class="comment"># 查看帮助</span></span><br><span class="line"></span><br><span class="line">user-interface vty 0 4 <span class="comment"># 开启虚拟终端管理</span></span><br><span class="line"><span class="built_in">set</span> authentication password cipher pass <span class="comment"># 设置认证密码为pass</span></span><br><span class="line"></span><br><span class="line">talent 10.1.1.1 <span class="comment"># 远程管理设备，不能进入system-view</span></span><br><span class="line"></span><br><span class="line">diaplay ip routting0table <span class="comment"># 查看路由表</span></span><br></pre></td></tr></table></figure><h1 id="网络各种分层结构"><a href="#网络各种分层结构" class="headerlink" title="网络各种分层结构"></a>网络各种分层结构</h1><h2 id="网络分层基础"><a href="#网络分层基础" class="headerlink" title="网络分层基础"></a>网络分层基础</h2><blockquote><p>网络的层次化不要以设备最为标准，要以协议作为分层的标准。</p></blockquote><h3 id="OSI-开放式系统互联模型-七层模型"><a href="#OSI-开放式系统互联模型-七层模型" class="headerlink" title="OSI(开放式系统互联模型) 七层模型"></a>OSI(开放式系统互联模型) 七层模型</h3><ol><li><code>应用层</code> 为应用程序提供网络服务</li><li><code>表示层</code> 数据格式化，加密、解密，如：jpg，gif</li><li><code>会话层</code> 建立、维护、管理会话连接,系统(Linux,iOS,Android)在此</li><li><code>传输层</code> 建立、维护、管理端到端连接，单位：段(segment)，TCP/UDP连个协议</li><li><code>网络层</code> IP寻址和路由选择,单位：包，有200多个协议</li><li><code>数据链路层</code> 控制网络层与物理层之间的通讯，单位：帧(frame)</li><li><code>物理层</code> 比特流传输，单位：比特(bit)</li></ol><ul><li>应用层、表示层、会话层：单位统称为：协议数据单元(PDU),<code>物理层</code> 在TCP/IP中被称为 <code>互联网层</code> (Internet Protocal)</li></ul><h3 id="TCP-IP-工业标准"><a href="#TCP-IP-工业标准" class="headerlink" title="TCP/IP(工业标准)"></a>TCP/IP(工业标准)</h3><ol><li>应用层 (TELNET、FTP、SMTP)</li><li>传输层 (TCP、UDP)</li><li>互联网层 (IP、ICMP),路由</li><li>网络接口层 (PPP)，交换</li></ol><h2 id="数据封装"><a href="#数据封装" class="headerlink" title="数据封装"></a>数据封装</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/shujufengzhuang.png" alt=""></div><div class="image-caption"></div></figure><p>每一层都有一个头部</p><h2 id="TCP与UDP的概念相互的区别及优劣"><a href="#TCP与UDP的概念相互的区别及优劣" class="headerlink" title="TCP与UDP的概念相互的区别及优劣"></a>TCP与UDP的概念相互的区别及优劣</h2><ol><li>TCP面向连接，UDP面向无链接</li><li>TCP面向报文，UDP面向字节流</li><li>TCP提供可靠传输服务（数据顺序、正确性），UDP传输不可靠</li><li>TCP协议传输速度慢，UDP协议传输速度快</li><li>TCP协议对系统资源要求多（头部开销大），UDP协议要求少*</li></ol><h2 id="VRP-的操作"><a href="#VRP-的操作" class="headerlink" title="VRP 的操作"></a>VRP 的操作</h2><p>管理vlan(虚拟局域网)</p><figure class="highlight bash"><figcaption><span>SW1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">sysname SW1</span><br><span class="line">interface vlanif 1</span><br><span class="line">ip address 10.1.1.1 24</span><br><span class="line">display this</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>SW2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">sysname SW2</span><br><span class="line">interface vlan 1</span><br><span class="line">ip address 10.1.1.2 24</span><br></pre></td></tr></table></figure><p>ENSP自带了网络报文解析器。右键设备-数据抓包</p><h1 id="Ehternet基础"><a href="#Ehternet基础" class="headerlink" title="Ehternet基础"></a>Ehternet基础</h1><blockquote><p>网络中传输数据时需要定义并遵循一些标准，以太网是根据IEEE802.3 标准来管理和控制数据帧的。了解IEEE802.3标准是充分理解以太网中链路层通讯的标准。</p></blockquote><ul><li>IEEE 是局域网标准</li></ul><h2 id="以太网帧"><a href="#以太网帧" class="headerlink" title="以太网帧"></a>以太网帧</h2><p>以太网(最流行，最常用，效率最高)，它的数据链路层基于MAC地址进行帧的传输。<br>PR：<br>FR(MA网络)：帧中继靠的是DLCI<br>PPP(ppp网络)、HDLC(ppp网络)：什么都不靠</p><h2 id="以太网MAC地址"><a href="#以太网MAC地址" class="headerlink" title="以太网MAC地址"></a>以太网MAC地址</h2><p>以太网的MAC地址(Media Access Control Address)：<br>由两部分组成:前24位的供应商代码、后24位的序列号。供应商代码由IEEE管理和分配。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/MacAddress.png" alt=""></div><div class="image-caption"></div></figure><p>OUI：厂商序号</p><h3 id="MAC分类"><a href="#MAC分类" class="headerlink" title="MAC分类"></a>MAC分类</h3><p>单一的源段发送到单一的目的端，每个主机接口由一个MAC地址唯一标识，MAC地址的OUI中第一字节第8个比特表示地址类型，对于主机MAC地址这个比特固定为0如，表示目的的MAC地址为此MAC地址的帧都是发送到某个唯一的端。在冲突域中，所有主机都能收到源主机发送的单播帧，但其他主机发现目的地址与本地MAC地址不一致后会丢弃收到的帧，只有真正的目的主机才会接收并处理收到的帧</p><p><code>单播MAC</code>(1 V 1)：01001100 第一字节的最后一位：0<br><code>组播MAC</code>(1 V n): 00000001 第一字节的最后一位：1<br><code>广播MAC</code>(1 V all): F1111111 第一字节的最后一位：1</p><p>01005E:经典的组播MAC</p><h2 id="以太网封装格式"><a href="#以太网封装格式" class="headerlink" title="以太网封装格式"></a>以太网封装格式</h2><p>以太网两种最常用的以太网封装格式：以太2型和802.3</p><p>80年代初：DIX v2，1983年：提出IEEE8.2.3</p><p>类型的位置除了IP(0800)还有ARP(0806),PPPoE,MP,IPv6c</p><p>两种协议的主要区别在于：</p><p>EnternetII格式中包含一个Type字段，标识以太网帧处理完成值后将被发送到哪个上层协议进行处理。IEEE802.3格式同样的位置是长度字段。</p><p>以太网帧中的Type字段为0X0800，表示该帧的网络层协议为IP协议。</p><p>不同的Type字段值可以用来区别这两种帧的类型:</p><p><code>EnternetII格式</code>: Length/Type &gt;= 1536(0x0600)</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517125147.png" alt=""></div><div class="image-caption"></div></figure><p><code>IEEE802.3格式</code>: Length/Type &lt;= 1500(0x05DC)</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517125222.png" alt=""></div><div class="image-caption"></div></figure><p>以太网帧中还包括源和目的的MAC地址，分别代表发送者和接受者的MAC，此外还有帧校验序列字段，用于检验传输过程中的完整性。</p><h1 id="以太网IP地址网络基础和FTP"><a href="#以太网IP地址网络基础和FTP" class="headerlink" title="以太网IP地址网络基础和FTP"></a>以太网IP地址网络基础和FTP</h1><h2 id="IP编制"><a href="#IP编制" class="headerlink" title="IP编制"></a>IP编制</h2><h3 id="IP编制组成"><a href="#IP编制组成" class="headerlink" title="IP编制组成"></a>IP编制组成</h3><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/ndLwcGxUgrkJhCq.png" alt=""></div><div class="image-caption"></div></figure><ol><li>IP 地址分为网络部分和主机部分</li><li>IP 地址由32个二进制位组成，通常用点分十进制形式表示。</li></ol><ul><li>IP报文头部</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/R1GazuNob9qBnwY.png" alt=""></div><div class="image-caption"></div></figure><p>Tyep[Data] 的 1500 包括IP报头</p><h2 id="以太网IPv4基础和分类"><a href="#以太网IPv4基础和分类" class="headerlink" title="以太网IPv4基础和分类"></a>以太网IPv4基础和分类</h2><p><code>/8</code>：代表掩码，作用：区分网络和主机，代表8个连续的1(255.0.0.0)<br><code>127.0.0.0/8</code> ：网络(主机位全为0)<br><code>127.255.255.255/8</code> ：广播地址(主机全为1)</p><p>每个网段上有两个特俗地址不能分配给主机或网络设备。(除网络地址和广播地址外的其他IP地址可以作为网络设备的IP地址)</p><ol><li><p>IP地址主机位全为0(而不是无端一定为0)，表示一个网段。</p></li><li><p>该网段中的广播地址，目的地址为广播地址的报文会被该网段中的所有网络设备接受，广播地址的主机位全为1.</p></li></ol><h2 id="网络的进制"><a href="#网络的进制" class="headerlink" title="网络的进制"></a>网络的进制</h2><p>二进制，十进制，十六进制(MAC)</p><h2 id="IPv4地址分类"><a href="#IPv4地址分类" class="headerlink" title="IPv4地址分类"></a>IPv4地址分类</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/20200517125412.png" alt=""></div><div class="image-caption"></div></figure><h3 id="地址范围"><a href="#地址范围" class="headerlink" title="地址范围"></a>地址范围</h3><p>A类：1.0.0.1 - 126.255.255.254<br>B类：128.1.0.1 - 191.255.255.254<br>C类：192.0.1.1 - 223.255.255.254<br>D类：224.0.0.0 - 239.255.255.255<br>E类：240.0.0.1 - 255.255.255.254</p><ul><li>NET: ABCDE的有类网络</li><li>subset：即子网(一个大的网络划分成小的网络)</li></ul><p>10.2.8.3/24 可以容纳的主机：2^8-2</p><h3 id="IP地址类型"><a href="#IP地址类型" class="headerlink" title="IP地址类型"></a>IP地址类型</h3><p>互联网标准：RFC</p><ul><li>私有地址</li></ul><ol><li>10.0.0.0~10.255.255.255</li><li>127.16.0.0~127.31.55.255</li><li>192.168.0.0~192.158.255.255</li></ol><ul><li>特俗地址</li></ul><ol><li>127.0.0.0~127.255.255.255, 127.0.0.1主机环回地址</li><li>0.0.0.0</li><li>255.255.2555.255(本地广播地址，是0.0.0.0的广播地址)</li></ol><h2 id="子网掩码-subset-mask"><a href="#子网掩码-subset-mask" class="headerlink" title="子网掩码(subset mask)"></a>子网掩码(subset mask)</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/YGBtav3hmNwMCDi.png" alt=""></div><div class="image-caption"></div></figure><ul><li>默认子网掩码</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/s25D4BLpFRfkITJ.png" alt=""></div><div class="image-caption"></div></figure><p>A类：8位<br>B类：16位<br>C类：24位</p><h2 id="地址规划"><a href="#地址规划" class="headerlink" title="地址规划"></a>地址规划</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/xzUOeirdFZqsyjh.png" alt=""></div><div class="image-caption"></div></figure><ul><li>举例</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/iNvgm3yKU5ehRZn.png" alt=""></div><div class="image-caption"></div></figure><p>由子网掩码可知：172.10.1.7/16，所以网络地址为：172.16.0.0(主机位全为0)，主机数：2^16,可用主机数: 2^16-2</p><p>例子：10.1.8.3/24的网络是什么？第一个可用主机是？最后一个可用主机？可用主机是多少？<br>10.1.8.0，10.1.8.1，10.1.8.254，$2^8$-2=254</p><ul><li>变长子网掩码</li></ul><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/ScY1AUKshDLRvx4.png" alt=""></div><div class="image-caption"></div></figure><p>192.168.1.7/25</p><h2 id="有类IP编址的缺陷"><a href="#有类IP编址的缺陷" class="headerlink" title="有类IP编址的缺陷"></a>有类IP编址的缺陷</h2><p>在设计网络时使用有类IP地址会造成地址的浪费。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/Sv8LD5ZQUioz7lw.png" alt=""></div><div class="image-caption"></div></figure><h2 id="划分子网方法"><a href="#划分子网方法" class="headerlink" title="划分子网方法"></a>划分子网方法</h2><ol><li><p>根据需要的子网数目来确定子网位数，但是要确保每个子网可用的IP地址数目大于等于本机数。<br>优点：简单<br>缺点：每个子网的实际主机数不同，但分配的IP地址数目相同，可能浪费IP地址</p></li><li><p>根据每个子网的主机数目来确定主机数位，然后确定子网数位。<br>优点：比较充分地利用IP地址<br>缺点：复杂</p></li></ol><h2 id="计算"><a href="#计算" class="headerlink" title="计算"></a>计算</h2><h3 id="科学但麻烦的方法"><a href="#科学但麻烦的方法" class="headerlink" title="科学但麻烦的方法"></a>科学但麻烦的方法</h3><p>要转换二进制<br>二进制:1代表网络，0代表主机。</p><ol><li>子网的数目 = $2^x$ (x代表子网位数)</li><li>可用主机数目 = $2^y$-2 (y代表主机位数)</li><li>主机位为全1的地址时广播地址=下个子网号-1</li><li>主机位全为0的地址是网络地址。</li></ol><ul><li>利用子网数目计算子网掩码</li></ul><blockquote><p>把B类地址172.16.0.0划分成30个子网络，它的子网掩码是多少？</p></blockquote><p>将子网络数目30转换成二进制表示11110<br>统计一下这个二进制的数共有5位<br>注意：当二进制数中只有一个1的时候，所统计的位数需要减1（例如：10000要统计为4位）<br>将B类地址的子网掩码255.255.0.0主机地址部分的前5位变成1<br>这就得到了所要的子网掩码（11111111.11111111.11111000.00000000）255.255.248.0。</p><ul><li>利用主机数目计算子网掩码</li></ul><blockquote><p>把B类地址172.16.0.0划分成若干子网络，每个子网络能容纳500台主机，它的子网掩码是多少？</p></blockquote><p>把500转换成二进制表示111110100<br>统计一下这个二进制的数共有9位<br>将子网掩码255.255.255.255从后向前的9位变成0<br>这就得到了所要的子网掩码（11111111.11111111.11111110.00000000）255.255.254.0。</p><ul><li>利用子网掩码计算最大有效子网数</li></ul><blockquote><p>A类IP地址，子网掩码为255.224.0.0，它所能划分的最大有效子网数是多少？</p></blockquote><p>将子网掩码转换成二进制表示11111111.11100000.00000000.00000000<br>统计一下它的网络位共有11位<br>A类地址网络位的基础数是8，二者之间的位数差是3<br>最大有效子网数就是$2^3$，即最多可以划分8个子网络。</p><ul><li>利用子网掩码计算最大可用主机数</li></ul><blockquote><p>A类IP地址，子网掩码为255.252.0.0，将它划分成若干子网络，每个子网络中可用主机数有多少？</p></blockquote><p>将子网掩码转换成二进制表示11111111.11111100.00000000.00000000<br>统计一下它的主机位共有18位<br>最大可用主机数就是 2^18-2（除去全是0的网络地址和全是1广播地址），即每个子网络最多有262142台主机可用。</p><ul><li>利用子网掩码确定子网络的起止地址</li></ul><blockquote><p>B类IP地址172.16.0.0，子网掩码为255.255.192.0，它所能划分的子网络起止地址是多少？</p></blockquote><ul><li>利用子网掩码计算，最多可以划分4个子网络</li></ul><blockquote><p>利用子网掩码计算，每个子网络可容纳16384台主机（包括网络地址和广播地址）</p></blockquote><p>用16384除以256（网段内包括网络地址和广播地址的全部主机数），结果是64<br>具体划分网络起止方法如下：<br>172.16.0.0～172.16.63.255<br>172.16.64.0～172.16.127.255<br>172.16.128.0～172.16.191.255<br>172.16.192.0～172.16.255.255</p><p><a href="http://blog.sina.com.cn/s/blog_5753d0930101fxdf.html" target="_blank" rel="noopener">参考来源</a></p><h2 id="快速但需要检验的方法"><a href="#快速但需要检验的方法" class="headerlink" title="快速但需要检验的方法"></a>快速但需要检验的方法</h2><p>快的方式(Block):几个主机位,算B类地址比较麻烦.</p><ul><li>例子</li></ul><p>132.56.45.7/30,网络位，主机位多少？</p><p>30转成二进制：1111，1100，后两位的0的块：$2^2$,一块最多4个主机(0-3,4-7,8-11)</p><h2 id="CIDR-无类域间路由"><a href="#CIDR-无类域间路由" class="headerlink" title="CIDR 无类域间路由"></a>CIDR 无类域间路由</h2><p>cidrreport.org<br>无间路由(Classless Inter Domain Routing):由RFC1871定义。突破传统的地址分类边界，将路由表中的若干条线路汇聚成一条路由，减少了路由表的规模，提高了路由的可扩展性。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/xD3bcuXPFsLTiSZ.png" alt=""></div><div class="image-caption"></div></figure><p>图中：转成二进制：<br>10.24.0000，0000.0<br>10.24.0000，0001.0<br>10.24.0000，0010.0<br>10.24.0000，0011.0</p><p>转二进制部分只有后两位不一样。把网络往前推（子网是Mask边长汇总是Mask变短),原来是24，变短就是22.</p><h2 id="网关-Gateway"><a href="#网关-Gateway" class="headerlink" title="网关(Gateway)"></a>网关(Gateway)</h2><p>用来转发来自不同网段之间的数据包。</p><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/6y7Jc51WoUZINP8.png" alt=""></div><div class="image-caption"></div></figure><h2 id="实施FTP"><a href="#实施FTP" class="headerlink" title="实施FTP"></a>实施FTP</h2><ul><li>文件传输</li></ul><p>FTP：文件传输协议 (华为居多)，基于TCP，两个端口号,控制端口一般为21，而数据端口不一定是20，和FTP的应用模式有关，如果是主动模式，应该为20，如果为被动模式，由服务器端和客户端协商而定。<br>TFTP：简单文件传输协议 (思科居多)，基于UDP</p><ol><li>网络连通性</li></ol><figure class="highlight bash"><figcaption><span>SW1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">interface vlanf1</span><br><span class="line">ip address 10.1.1.1 255.255.255.0</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>SW2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">interface vlanf1</span><br><span class="line">ip address 10.1.1.2 255.255.255.0</span><br></pre></td></tr></table></figure><p>测试连通性</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping 10.1.1.1.2</span><br></pre></td></tr></table></figure><ol start="2"><li>开启FTP服务</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ftp server <span class="built_in">enable</span></span><br><span class="line">diaplay ftp-servver <span class="comment"># 查看状态</span></span><br></pre></td></tr></table></figure><ol start="3"><li>实施FTP</li></ol><p>开启3A（认证，授权，统计）</p><figure class="highlight bash"><figcaption><span>SW1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">aaa</span><br><span class="line"><span class="built_in">local</span>-user Endar password simple userName <span class="comment"># 增加用户名和密码</span></span><br><span class="line"><span class="built_in">local</span>-user Endar level 15 <span class="comment"># 设置最高的访问权限，0-15级</span></span><br><span class="line"><span class="built_in">local</span>-user Endar ftp-directory flash: <span class="comment"># 共享所有目录，后面可以指定其他</span></span><br><span class="line"><span class="built_in">local</span>-user Endar server-type ftp <span class="comment"># 设置用户服务用于ftp协议</span></span><br><span class="line">save Endar.zip <span class="comment"># 保持配置文件</span></span><br><span class="line">sss</span><br><span class="line"></span><br><span class="line">客户端测试</span><br><span class="line"></span><br><span class="line">```bash SW2</span><br><span class="line">ftp 10.1.1.1 <span class="comment"># 后输入用户名、密码</span></span><br><span class="line">dir <span class="comment"># 查考目录</span></span><br><span class="line">get Endar.zip <span class="comment"># 获取文件</span></span><br><span class="line">q <span class="comment"># 退出</span></span><br></pre></td></tr></table></figure><h1 id="以太网IP头部概述和VRP相关讲解"><a href="#以太网IP头部概述和VRP相关讲解" class="headerlink" title="以太网IP头部概述和VRP相关讲解"></a>以太网IP头部概述和VRP相关讲解</h1><p>一公司四个部门，5、25、27、15人，规划每个部门vlan，给固定长度掩码：192.168.1.0/27，192.168.1.32/27，192.168.1.64/27，192.168.1.96/27</p><h2 id="IP包头的重要字段"><a href="#IP包头的重要字段" class="headerlink" title="IP包头的重要字段"></a>IP包头的重要字段</h2><h2 id="VRP基础-应用"><a href="#VRP基础-应用" class="headerlink" title="VRP基础(应用)"></a>VRP基础(应用)</h2><h1 id="VRP-通用路由平台-的FTP应用"><a href="#VRP-通用路由平台-的FTP应用" class="headerlink" title="VRP(通用路由平台)的FTP应用"></a>VRP(通用路由平台)的FTP应用</h1><p>可以Web、Cli登录<br>常用密码：Admin@huawei</p><h2 id="设备初始化启动"><a href="#设备初始化启动" class="headerlink" title="设备初始化启动"></a>设备初始化启动</h2><p>bios 自检<br>内存检测<br>copy 数据(VRP包拷贝)<br>解压缩到内存<br>CTRL + B 停止自动启动(后可以初始密码)</p><h2 id="命令行视图"><a href="#命令行视图" class="headerlink" title="命令行视图"></a>命令行视图</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/RLPUMe4njqVylga.png" alt=""></div><div class="image-caption"></div></figure><ul><li>用户视图</li></ul><p>清除、display、保存</p><ul><li>系统视图(system-view)</li></ul><p>以中括号显示。可以display，但不能清除、保存<br>配置系统参数</p><ul><li><p>接口视图</p></li><li><p>协议视图</p></li></ul><p>OSPF、BGP、is-is</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">ospf <span class="comment"># 进入 osp 协议设置</span></span><br><span class="line">bgp <span class="comment"># 将进入 bgp协议设置</span></span><br></pre></td></tr></table></figure><h2 id="命令行功能"><a href="#命令行功能" class="headerlink" title="命令行功能"></a>命令行功能</h2><table><thead><tr><th align="left">命令</th><th align="left">解释</th></tr></thead><tbody><tr><td align="left">CTRL + A</td><td align="left">光标移动到当前目录行最前端</td></tr><tr><td align="left">CTRL + E</td><td align="left">光标移动到当前目录行最末端</td></tr><tr><td align="left">CTRL + C</td><td align="left">停止当前命令的运行</td></tr><tr><td align="left">CTRL + Z</td><td align="left">回到用户视图</td></tr><tr><td align="left">CTRL + ]</td><td align="left">终止当前连接或切换连接</td></tr><tr><td align="left">Backspace</td><td align="left">删除光标左边的第一个字符</td></tr><tr><td align="left">⬅ Or CTRL + B</td><td align="left">光标左移一位</td></tr><tr><td align="left">➡ Or CRTL + F</td><td align="left">光标右移一位</td></tr><tr><td align="left">TAB</td><td align="left">输入一个不完整的命令按TAB进行补全</td></tr></tbody></table><h2 id="命令行在线帮助"><a href="#命令行在线帮助" class="headerlink" title="命令行在线帮助"></a>命令行在线帮助</h2><ul><li>部分帮助</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;d?</span><br><span class="line">&lt;Huawei&gt;display h?</span><br></pre></td></tr></table></figure><ul><li>完全帮助</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;Huawei&gt;?</span><br><span class="line">&lt;Huawei&gt;dislay?</span><br></pre></td></tr></table></figure><h2 id="命令等级"><a href="#命令等级" class="headerlink" title="命令等级"></a>命令等级</h2><table><thead><tr><th align="left">用户等级</th><th align="left">命令等级</th><th align="left">名称</th></tr></thead><tbody><tr><td align="left">0</td><td align="left">0</td><td align="left">访问级</td></tr><tr><td align="left">1</td><td align="left">0 and 1</td><td align="left">监控级</td></tr><tr><td align="left">2</td><td align="left">0，1 and 2</td><td align="left">配置级</td></tr><tr><td align="left">3-15</td><td align="left">0，1，2 and 3</td><td align="left">管理级</td></tr></tbody></table><p>允许某管理员保存系统配置，则可以将save命令的级别提高到4级，并定义只有该管理员有4级权限。就可以在不影响其他用户的情况下，实现命令的使用控制。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line"><span class="built_in">command</span>-privileage level 2 view user save</span><br></pre></td></tr></table></figure><h2 id="用户界面"><a href="#用户界面" class="headerlink" title="用户界面"></a>用户界面</h2><p>VTY接口最大可配范围：0~4</p><table><thead><tr><th align="left">用户界面类型</th><th align="left">编号</th></tr></thead><tbody><tr><td align="left">Console</td><td align="left">0</td></tr><tr><td align="left">VTY</td><td align="left">0~4</td></tr></tbody></table><figure class="highlight bash"><figcaption><span>R1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">user-intetface vty 0 4</span><br><span class="line"><span class="built_in">set</span> authentication password clipher pass</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>R2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">talnet 12.1.1.1</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>R1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">diaplay users <span class="comment"># 查看用户</span></span><br><span class="line">user privilege level 2 <span class="comment"># 设置用户登陆权限</span></span><br></pre></td></tr></table></figure><p><code>user-interface maximum-vty number</code> 可以配置同时登陆到设备的VTY类型用户界面的最大个数，如最大登录用户数设为0，则任何用户都不能通过Telnet或者SSH登陆到路由器。</p><ul><li>配置用户界面命令</li></ul><table><thead><tr><th align="left">命令</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left">idle-tineout</td><td align="left">设置超时时间默认十分钟</td></tr><tr><td align="left">screen-length</td><td align="left">设置指定终端屏幕的临时显示行数(0不显示)</td></tr><tr><td align="left">history-command max-size</td><td align="left">设置历史命令缓冲区的大小</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">user-interface console 0</span><br><span class="line">histoty-command max-size 20</span><br><span class="line">indle-timeout 1 30 <span class="comment"># 1分20秒(最好不要改))</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">user-interface console 0</span><br><span class="line">screen-length 512 <span class="comment"># 最大行数512</span></span><br></pre></td></tr></table></figure><h2 id="CTR-快捷键"><a href="#CTR-快捷键" class="headerlink" title="CTR 快捷键"></a>CTR 快捷键</h2><table><thead><tr><th align="left">命令</th><th align="left">解释</th></tr></thead><tbody><tr><td align="left">CTRL + TAB</td><td align="left">到达后一标签</td></tr><tr><td align="left">CTRL + SHIFT + TAB</td><td align="left">前一标签</td></tr><tr><td align="left">ALT + 数字</td><td align="left">直接到达某标签</td></tr></tbody></table><h2 id="配置标题消息"><a href="#配置标题消息" class="headerlink" title="配置标题消息"></a>配置标题消息</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置在用户登录前显示的标题信息</span></span><br><span class="line">header login information <span class="string">"Welcome to huawei certification"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置在用户登陆后显示的标题信息</span></span><br><span class="line">header shell information <span class="string">"Please dont't reboot this devices"</span></span><br></pre></td></tr></table></figure><p><code>dis current-configuration | ?</code><br><code>dis current-configuration | include header</code> 显示包含 header 的命令有哪些</p><h1 id="文件系统管理"><a href="#文件系统管理" class="headerlink" title="文件系统管理"></a>文件系统管理</h1><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><table><thead><tr><th align="left">命令</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left">pwd</td><td align="left">查看当前目录</td></tr><tr><td align="left">dir</td><td align="left">显示当前目录下的文件信息</td></tr><tr><td align="left">more</td><td align="left">查看文本文件的具体内容</td></tr><tr><td align="left">cd</td><td align="left">修改当前用户当前界面的工作目录</td></tr><tr><td align="left">mkdir</td><td align="left">创建新目录</td></tr><tr><td align="left">rmdir</td><td align="left">删除目录</td></tr><tr><td align="left">copy</td><td align="left">复制文件</td></tr><tr><td align="left">move</td><td align="left">移动文件</td></tr><tr><td align="left">rename</td><td align="left">村民们文件</td></tr><tr><td align="left">delete / unreserved</td><td align="left">删除/永久删除文件</td></tr><tr><td align="left">undelete</td><td align="left">恢复删除的文件</td></tr><tr><td align="left">reset recycle-bin</td><td align="left">彻底删除回收站的文件</td></tr><tr><td align="left">save</td><td align="left">保存配置，要在用户模式下</td></tr></tbody></table><h2 id="配置文件管理"><a href="#配置文件管理" class="headerlink" title="配置文件管理"></a>配置文件管理</h2><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://cdn.jsdelivr.net/gh/ivitan/Picture@master/images/B7dYZRDnW2tQmc6.png" alt=""></div><div class="image-caption"></div></figure><ul><li>配置文件查询</li></ul><table><thead><tr><th align="left">命令</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left">diaplay curremt-contiguration</td><td align="left">显示当前配置文件</td></tr><tr><td align="left">diaplay saved-configuration</td><td align="left">显示保存的配置文件</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">save Endar.zip <span class="comment"># 保存配置</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前配置</span></span><br><span class="line">diaplay current-configuration</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示保存的配置文件</span></span><br><span class="line">diaplay saved-configuration</span><br></pre></td></tr></table></figure><ul><li>系统启动文件查查</li></ul><table><thead><tr><th align="left">命令</th><th align="left">功能</th></tr></thead><tbody><tr><td align="left">display startup</td><td align="left">查看系统启动参数</td></tr></tbody></table><ul><li>系统启动配置文件修改</li></ul><p><code>startuo ?</code> :</p><ol><li>path # 加载补丁</li><li>save-configuration # 加载下次的配置</li><li>system-software # 加载下次启动的软件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置系统下次启动时使用的配置文件</span></span><br><span class="line">startup save-configuration Ender.zip</span><br><span class="line">dis startup</span><br></pre></td></tr></table></figure><ul><li>比较当前配置和保存的配置</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compare configuration</span><br></pre></td></tr></table></figure><ul><li>配置文件重装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清楚下次启动时加载的配置文件</span></span><br><span class="line">reset save-contiguration</span><br></pre></td></tr></table></figure><ul><li>设置环回地址</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">system-view</span><br><span class="line">interface loopback 0</span><br><span class="line">ip address 10.1.1.1 32</span><br></pre></td></tr></table></figure><h2 id="存储设备"><a href="#存储设备" class="headerlink" title="存储设备"></a>存储设备</h2><p>SDRAM、Flash、NVRAM、SD Card、USB</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示存储设备信息</span></span><br><span class="line">diaplay version</span><br></pre></td></tr></table></figure><ul><li>存储设备修复</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fixdisk flash:</span><br><span class="line"></span><br><span class="line">fixdisk ad1:</span><br></pre></td></tr></table></figure></div><blockquote class="post-copyright"><div class="content"><span class="post-time">最后更新时间：<time datetime="2021-08-19T15:45:31.000Z" itemprop="dateUpdated">2021-08-19 23:45:31</time></span><br>原始链接：<a href="/posts/HCNA_Note.html" target="_blank" rel="external">https://ivitan.com/posts/HCNA_Note.html</a></div><footer><a href="https://ivitan.com"><img src="/img/ivitan.png" alt="VITAN"> VITAN</a></footer></blockquote><div class="page-reward"><a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a></div><div class="post-footer"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul></div><div class="post-ads"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9318335501008303" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9318335501008303" data-ad-slot="8390341665" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><nav class="post-nav flex-row flex-justify-between"><div class="waves-block waves-effect prev"><a href="/posts/CMD.html" id="post-prev" class="post-nav-link"><div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div><h4 class="title">CMD</h4></a></div><div class="waves-block waves-effect next"><a href="/posts/LAMP.html" id="post-next" class="post-nav-link"><div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">LAMP</h4></a></div></nav><div class="comments vcomment" id="comments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter((function(e){return GUEST_INFO.indexOf(e)>-1}));new Valine({el:"#comments",notify:!1,verify:!1,appId:"D33WPBHpBw2CjwdWpFvpUhDm-MdYXbMMI",appKey:"MzQtKvSeVPU4nS4ljd3zlbMp",avatar:"wavatar",placeholder:"Just go go.",guest_info:0==guest_info.length?GUEST_INFO:guest_info,pageSize:"10"})</script></article><div id="reward" class="page-modal reward-lay"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><h3 class="reward-title"><i class="icon icon-quote-left"></i> 感谢支持 <i class="icon icon-quote-right"></i></h3><div class="reward-content"><div class="reward-code"><img id="rewardCode" src="/img/wechat.png" alt="打赏二维码"></div><label class="reward-toggle"><input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.png" data-alipay="/img/alipay.png"><div class="reward-toggle-ctrol"><span class="reward-toggle-item wechat">微信</span> <span class="reward-toggle-item switch" id="switvh">切换</span> <span class="reward-toggle-item alipay">支付宝</span></div></label></div></div><script src="//unpkg.com/jquery@latest/dist/jquery.min.js"></script><script src="/js/clipboard.min.js?v=1.8.5"></script><script src="/js/copy.min.js?v=1.8.5"></script></div><footer class="footer"><div class="top"><p><span id="busuanzi_container_site_uv" style="display:none"><i class="icon icon-user"></i><span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" style="display:none"><i class="icon icon-eye"></i><span id="busuanzi_value_site_pv"></span></span></p><p><span>VITAN &copy; 2017 - 2021</span> <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/ivitan/indigo" target="_blank">Indigo</a></span></p></div><div class="bottom"><p><span><a href="/xml/atom.xml" target="_blank" class="rss" title="RSS"><i class="icon icon-lg icon-rss"></i></a></span> <span>内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 协议</a></span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script>var BLOG={ROOT:"/",SHARE:!1,REWARD:!0}</script><script src="/js/main.min.js?v=1.8.5"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis">{tags}</div><time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=1.8.5" async></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>