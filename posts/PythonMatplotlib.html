<!DOCTYPE html><html><head><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-144334903-2","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js"></script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9318335501008303" crossorigin="anonymous"></script><meta charset="utf-8"><meta name="sogou_site_verification" content="ZjNrHOGj7T"><link rel="canonical" href="https://ivitan.com/posts/PythonMatplotlib.html"><title>Python Matplotlib 各种图 - 楊咩阿</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#f45a8d"><meta name="keywords" content="WebCrawler,Python"><meta name="baidu-site-verification" content="code-BrguQlsdqJ"><meta name="description" content="Matplotlib 各种图"><meta property="og:type" content="article"><meta property="og:title" content="Python Matplotlib 各种图"><meta property="og:url" content="https://ivitan.com/posts/PythonMatplotlib.html"><meta property="og:site_name" content="楊咩阿"><meta property="og:description" content="Matplotlib 各种图"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0j1550lxj20c0080jre.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0j4ktleuj20c00800ss.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0jcakoz3j20c0080mxb.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0k3zz5g9j20b907utae.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0jh2r431j20c00800t2.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0khch6l1j20c00800sl.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0kkhvvshj20c0080747.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mm4l1gvj20c00803ye.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0knyeutbj20c0080mx8.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0kp9cxanj20c0080jrt.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0krsx0j5j20c0080t8q.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mqe23jgj20c0080q2w.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mt6kcxgj20c0080q35.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mvachvuj20c0080dg0.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0m6gdokgj20c0080aai.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0m7o9accj20c0080mxt.jpg"><meta property="og:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0miksd7jj20c0080jro.jpg"><meta property="article:published_time" content="2018-11-08T02:11:00.000Z"><meta property="article:modified_time" content="2021-09-20T03:44:20.274Z"><meta property="article:author" content="VITAN"><meta property="article:tag" content="WebCrawler"><meta property="article:tag" content="Python"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0j1550lxj20c0080jre.jpg"><link rel="alternate" type="application/atom+xml" title="楊咩阿" href="/xml/atom.xml"><link rel="shortcut icon" href="/img/favicon.svg"><link rel="stylesheet" href="/css/style.css?v=1.8.5"><script>window.lazyScripts=[]</script><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading" class="active"></div><aside id="menu" class="hide"><div class="inner flex-row-vertical"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off"><i class="icon icon-lg icon-close"></i></a><div class="brand-wrap" style="background-image:url(/img/brand.png)"><div class="brand"><a href="/" class="avatar waves-effect waves-circle waves-light"><img src="/img/ivitan.png"></a><hgroup class="introduce"><h5 class="nickname">VITAN</h5><a href="mailto:vitanyeung@gmail.com" title="vitanyeung@gmail.com" class="mail">vitanyeung@gmail.com</a></hgroup></div></div><div class="scroll-wrap flex-col"><ul class="nav"><li class="waves-block waves-effect"><a href="/"><i class="icon icon-lg icon-home"></i> 首页</a></li><li class="waves-block waves-effect"><a href="/archives"><i class="icon icon-lg icon-archives"></i> 归档</a></li><li class="waves-block waves-effect"><a href="/tags"><i class="icon icon-lg icon-tags"></i> 标签</a></li><li class="waves-block waves-effect"><a href="/about"><i class="icon icon-lg icon-user"></i> 关于</a></li><li class="waves-block waves-effect"><a href="https://github.com/ivitan" target="_blank"><i class="icon icon-lg icon-github-alt"></i> Github</a></li></ul></div></div></aside><main id="main"><header class="top-header" id="header"><div class="flex-row"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle"><i class="icon icon-lg icon-navicon"></i></a><div class="flex-col header-title ellipsis">Python Matplotlib 各种图</div><div class="search-wrap" id="search-wrap"><a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i> </a><input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字"> <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search"><i class="icon icon-lg icon-search"></i></a></div></div></header><header class="content-header post-header"><div class="container fade-scale"><h1 class="title">Python Matplotlib 各种图</h1><h5 class="subtitle"><time datetime="2018-11-08T02:11:00.000Z" itemprop="datePublished" class="page-time">2018-11-08</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul></h5></div></header><div class="container body-wrap"><aside class="post-widget"><nav class="post-toc-wrap post-toc-shrink" id="post-toc"><h4>TOC</h4><ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#垂直条形图"><span class="post-toc-number">1.</span> <span class="post-toc-text">垂直条形图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#水平条形图"><span class="post-toc-number">2.</span> <span class="post-toc-text">水平条形图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#水平交错条形图"><span class="post-toc-number">3.</span> <span class="post-toc-text">水平交错条形图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#垂直堆叠条形图"><span class="post-toc-number">4.</span> <span class="post-toc-text">垂直堆叠条形图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-饼图"><span class="post-toc-number">5.</span> <span class="post-toc-text">matplotlib(饼图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#pie-函数参数解读"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">pie 函数参数解读</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">绘制</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-箱线图"><span class="post-toc-number">6.</span> <span class="post-toc-text">matplotlib(箱线图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#boxplot函数的参数解读"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">boxplot函数的参数解读</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#绘制-1"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">绘制</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-直方图"><span class="post-toc-number">7.</span> <span class="post-toc-text">matplotlib(直方图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#hist函数的参数解读"><span class="post-toc-number">7.1.</span> <span class="post-toc-text">hist函数的参数解读</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一元直方图的绘制"><span class="post-toc-number">7.2.</span> <span class="post-toc-text">一元直方图的绘制</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#累计频率直方图"><span class="post-toc-number">7.3.</span> <span class="post-toc-text">累计频率直方图</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#正太分布图"><span class="post-toc-number">8.</span> <span class="post-toc-text">正太分布图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#二元直方图的绘制"><span class="post-toc-number">9.</span> <span class="post-toc-text">二元直方图的绘制</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-折线图"><span class="post-toc-number">10.</span> <span class="post-toc-text">matplotlib(折线图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#plot函数的参数解读"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">plot函数的参数解读</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一元折线图的绘制"><span class="post-toc-number">11.</span> <span class="post-toc-text">一元折线图的绘制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#图形优化"><span class="post-toc-number">11.1.</span> <span class="post-toc-text">图形优化</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#多元折线图的绘制"><span class="post-toc-number">12.</span> <span class="post-toc-text">多元折线图的绘制</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-散点图"><span class="post-toc-number">13.</span> <span class="post-toc-text">matplotlib(散点图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#scatter函数的参数解读"><span class="post-toc-number">13.1.</span> <span class="post-toc-text">scatter函数的参数解读</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一般散点图的绘制"><span class="post-toc-number">14.</span> <span class="post-toc-text">一般散点图的绘制</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#分组散点图的绘制"><span class="post-toc-number">15.</span> <span class="post-toc-text">分组散点图的绘制</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#气泡图的绘制"><span class="post-toc-number">16.</span> <span class="post-toc-text">气泡图的绘制</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#散点图-线性回归线"><span class="post-toc-number">17.</span> <span class="post-toc-text">散点图+线性回归线</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-雷达图"><span class="post-toc-number">18.</span> <span class="post-toc-text">matplotlib(雷达图)</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#多条线的雷达图"><span class="post-toc-number">19.</span> <span class="post-toc-text">多条线的雷达图</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#pygal模块则提供了更加简单的雷达图函数"><span class="post-toc-number">20.</span> <span class="post-toc-text">pygal模块则提供了更加简单的雷达图函数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-面积图"><span class="post-toc-number">21.</span> <span class="post-toc-text">matplotlib(面积图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#stackplot函数语法及参数含义"><span class="post-toc-number">21.1.</span> <span class="post-toc-text">stackplot函数语法及参数含义</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#matplotlib-树地图"><span class="post-toc-number">22.</span> <span class="post-toc-text">matplotlib(树地图)</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#squarify-plot函数"><span class="post-toc-number">22.1.</span> <span class="post-toc-text">squarify.plot函数</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#数据文件"><span class="post-toc-number">23.</span> <span class="post-toc-text">数据文件</span></a></li></ol></nav></aside><article id="post-PythonMatplotlib" class="post-article article-type-post fade" itemprop="blogPost"><div class="post-card"><h1 class="post-card-title">Python Matplotlib 各种图</h1><div class="post-meta"><time class="post-time" title="2018-11-08 10:11:00" datetime="2018-11-08T02:11:00.000Z" itemprop="datePublished"><i class="icon icon-calendar"></i> 2018-11-08</time><ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/">Coding</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Coding/Python/">Python</a></li></ul></li></ul><span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none"><i class="icon icon-eye" style="padding:0 .3em"></i><span id="busuanzi_value_page_pv"></span></span></div><div class="post-content" id="post-content" itemprop="postContent"><p>Matplotlib 各种图</p><a id="more"></a><h1 id="垂直条形图"><a href="#垂直条形图" class="headerlink" title="垂直条形图"></a>垂直条形图</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入绘图模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># 构建数据</span></span><br><span class="line">GDP = [<span class="number">12406.8</span>,<span class="number">13908.57</span>,<span class="number">9386.87</span>,<span class="number">9143.64</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文乱码的处理</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] =[<span class="string">'SimHei'</span>]</span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.bar(range(<span class="number">4</span>), GDP, align = <span class="string">'center'</span>,color=<span class="string">'steelblue'</span>, alpha = <span class="number">0.8</span>)</span><br><span class="line"><span class="comment"># 添加轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">'GDP'</span>)</span><br><span class="line"><span class="comment"># 添加标题</span></span><br><span class="line">plt.title(<span class="string">'四个直辖市GDP大比拼'</span>)</span><br><span class="line"><span class="comment"># 添加刻度标签</span></span><br><span class="line">plt.xticks(range(<span class="number">4</span>),[<span class="string">'北京市'</span>,<span class="string">'上海市'</span>,<span class="string">'天津市'</span>,<span class="string">'重庆市'</span>])</span><br><span class="line"><span class="comment"># 设置Y轴的刻度范围</span></span><br><span class="line">plt.ylim([<span class="number">5000</span>,<span class="number">15000</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为每个条形图添加数值标签</span></span><br><span class="line"><span class="keyword">for</span> x,y <span class="keyword">in</span> enumerate(GDP):</span><br><span class="line">    plt.text(x,y+<span class="number">100</span>,<span class="string">'%s'</span> %round(y,<span class="number">1</span>),ha=<span class="string">'center'</span>)</span><br><span class="line">plt.savefig(<span class="string">'垂直条形图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0j1550lxj20c0080jre.jpg" alt=""></div><div class="image-caption"></div></figure><ul><li>解析<ol><li>由于matplotlib对中文的支持并不是很友好，所以需要提前对绘图进行字体的设置，即通过rcParams来设置字体，这里将字体设置为微软雅黑，同时为了避免坐标轴不能正常的显示负号，也需要进行设置；</li><li>bar 函数指定了条形图的x轴、y轴值，设置x轴刻度标签为水平居中，条形图的填充色color为铁蓝色，同时设置透明度alpha为0.8；</li><li>添加y轴标签、标题、x轴刻度标签值，为了让条形图显示各柱体之间的差异，将y轴范围设置在5000~15000；</li><li>通过循环的方式，添加条形图的数值标签；</li></ol></li></ul><h1 id="水平条形图"><a href="#水平条形图" class="headerlink" title="水平条形图"></a>水平条形图</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入绘图模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment"># 构建数据</span></span><br><span class="line">price = [<span class="number">39.5</span>,<span class="number">39.9</span>,<span class="number">45.4</span>,<span class="number">38.9</span>,<span class="number">33.34</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文乱码的处理</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] =[<span class="string">'SimHei'</span>]</span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.barh(range(<span class="number">5</span>), price, align = <span class="string">'center'</span>,color=<span class="string">'steelblue'</span>, alpha = <span class="number">0.8</span>)</span><br><span class="line"><span class="comment"># 添加轴标签</span></span><br><span class="line">plt.xlabel(<span class="string">'价格'</span>)</span><br><span class="line"><span class="comment"># 添加标题</span></span><br><span class="line">plt.title(<span class="string">'不同平台书的最低价比较'</span>)</span><br><span class="line"><span class="comment"># 添加刻度标签</span></span><br><span class="line">plt.yticks(range(<span class="number">5</span>),[<span class="string">'亚马逊'</span>,<span class="string">'当当网'</span>,<span class="string">'中国图书网'</span>,<span class="string">'京东'</span>,<span class="string">'天猫'</span>])</span><br><span class="line"><span class="comment"># 设置Y轴的刻度范围</span></span><br><span class="line">plt.xlim([<span class="number">32</span>,<span class="number">47</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为每个条形图添加数值标签</span></span><br><span class="line"><span class="keyword">for</span> x,y <span class="keyword">in</span> enumerate(price):</span><br><span class="line">    plt.text(y+<span class="number">0.1</span>,x,<span class="string">'%s'</span> %y,va=<span class="string">'center'</span>)</span><br><span class="line">plt.savefig(<span class="string">'水平条形图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形    </span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0j4ktleuj20c00800ss.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="水平交错条形图"><a href="#水平交错条形图" class="headerlink" title="水平交错条形图"></a>水平交错条形图</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入绘图模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment"># 构建数据</span></span><br><span class="line">Y2016 = [<span class="number">15600</span>,<span class="number">12700</span>,<span class="number">11300</span>,<span class="number">4270</span>,<span class="number">3620</span>]</span><br><span class="line">Y2017 = [<span class="number">17400</span>,<span class="number">14800</span>,<span class="number">12000</span>,<span class="number">5200</span>,<span class="number">4020</span>]</span><br><span class="line">labels = [<span class="string">'北京'</span>,<span class="string">'上海'</span>,<span class="string">'香港'</span>,<span class="string">'深圳'</span>,<span class="string">'广州'</span>]</span><br><span class="line">bar_width = <span class="number">0.45</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文乱码的处理</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] =[<span class="string">'SimHei'</span>]</span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.bar(np.arange(<span class="number">5</span>), Y2016, label = <span class="string">'2016'</span>, color = <span class="string">'steelblue'</span>, alpha = <span class="number">0.8</span>, width = bar_width)</span><br><span class="line">plt.bar(np.arange(<span class="number">5</span>)+bar_width, Y2017, label = <span class="string">'2017'</span>, color = <span class="string">'indianred'</span>, alpha = <span class="number">0.8</span>, width = bar_width)</span><br><span class="line"><span class="comment"># 添加轴标签</span></span><br><span class="line">plt.xlabel(<span class="string">'Top5城市'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'家庭数量'</span>)</span><br><span class="line"><span class="comment"># 添加标题</span></span><br><span class="line">plt.title(<span class="string">'亿万财富家庭数Top5城市分布'</span>)</span><br><span class="line"><span class="comment"># 添加刻度标签</span></span><br><span class="line">plt.xticks(np.arange(<span class="number">5</span>)+bar_width,labels)</span><br><span class="line"><span class="comment"># 设置Y轴的刻度范围</span></span><br><span class="line">plt.ylim([<span class="number">2500</span>, <span class="number">19000</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为每个条形图添加数值标签</span></span><br><span class="line"><span class="keyword">for</span> x2016,y2016 <span class="keyword">in</span> enumerate(Y2016):</span><br><span class="line">    plt.text(x2016, y2016+<span class="number">100</span>, <span class="string">'%s'</span> %y2016)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x2017,y2017 <span class="keyword">in</span> enumerate(Y2017):</span><br><span class="line">    plt.text(x2017+bar_width, y2017+<span class="number">100</span>, <span class="string">'%s'</span> %y2017)</span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend()</span><br><span class="line">plt.savefig(<span class="string">'水平交错条形图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0jcakoz3j20c0080mxb.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="垂直堆叠条形图"><a href="#垂直堆叠条形图" class="headerlink" title="垂直堆叠条形图"></a>垂直堆叠条形图</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入数据</span></span><br><span class="line">data = pd.read_excel(<span class="string">'C:\\Users\\Administrator\\Desktop\\货运.xls'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.bar(np.arange(<span class="number">8</span>), data.loc[<span class="number">0</span>,:][<span class="number">1</span>:], color = <span class="string">'red'</span>, alpha = <span class="number">0.8</span>, label = <span class="string">'铁路'</span>, align = <span class="string">'center'</span>)</span><br><span class="line">plt.bar(np.arange(<span class="number">8</span>), data.loc[<span class="number">1</span>,:][<span class="number">1</span>:],  bottom = data.loc[<span class="number">0</span>,:][<span class="number">1</span>:], color = <span class="string">'green'</span>, alpha = <span class="number">0.8</span>, label = <span class="string">'公路'</span>, align = <span class="string">'center'</span>)</span><br><span class="line">plt.bar(np.arange(<span class="number">8</span>), data.loc[<span class="number">2</span>,:][<span class="number">1</span>:],  bottom = data.loc[<span class="number">0</span>,:][<span class="number">1</span>:]+data.loc[<span class="number">1</span>,:][<span class="number">1</span>:], color = <span class="string">'m'</span>, alpha = <span class="number">0.8</span>, label = <span class="string">'水运'</span>, align = <span class="string">'center'</span>)</span><br><span class="line">plt.bar(np.arange(<span class="number">8</span>), data.loc[<span class="number">3</span>,:][<span class="number">1</span>:],  bottom = data.loc[<span class="number">0</span>,:][<span class="number">1</span>:]+data.loc[<span class="number">1</span>,:][<span class="number">1</span>:]+data.loc[<span class="number">2</span>,:][<span class="number">1</span>:], color = <span class="string">'black'</span>, alpha = <span class="number">0.8</span>, label = <span class="string">'民航'</span>, align = <span class="string">'center'</span>)</span><br><span class="line"><span class="comment"># 添加轴标签</span></span><br><span class="line">plt.xlabel(<span class="string">'月份'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'货物量(万吨)'</span>)</span><br><span class="line"><span class="comment"># 添加标题</span></span><br><span class="line">plt.title(<span class="string">'2017年各月份物流运输量'</span>)</span><br><span class="line"><span class="comment"># 添加刻度标签</span></span><br><span class="line">plt.xticks(np.arange(<span class="number">8</span>),data.columns[<span class="number">1</span>:])</span><br><span class="line"><span class="comment"># 设置Y轴的刻度范围</span></span><br><span class="line">plt.ylim([<span class="number">0</span>,<span class="number">500000</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为每个条形图添加数值标签</span></span><br><span class="line"><span class="keyword">for</span> x_t,y_t <span class="keyword">in</span> enumerate(data.loc[<span class="number">0</span>,:][<span class="number">1</span>:]):</span><br><span class="line">    plt.text(x_t,y_t/<span class="number">2</span>,<span class="string">'%sW'</span> %(round(y_t/<span class="number">10000</span>,<span class="number">2</span>)),ha=<span class="string">'center'</span>, color = <span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x_g,y_g <span class="keyword">in</span> enumerate(data.loc[<span class="number">0</span>,:][<span class="number">1</span>:]+data.loc[<span class="number">1</span>,:][<span class="number">1</span>:]):</span><br><span class="line">    plt.text(x_g,y_g/<span class="number">2</span>,<span class="string">'%sW'</span> %(round(y_g/<span class="number">10000</span>,<span class="number">2</span>)),ha=<span class="string">'center'</span>, color = <span class="string">'white'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x_s,y_s <span class="keyword">in</span> enumerate(data.loc[<span class="number">0</span>,:][<span class="number">1</span>:]+data.loc[<span class="number">1</span>,:][<span class="number">1</span>:]+data.loc[<span class="number">2</span>,:][<span class="number">1</span>:]):</span><br><span class="line">    plt.text(x_s,y_s<span class="number">-20000</span>,<span class="string">'%sW'</span> %(round(y_s/<span class="number">10000</span>,<span class="number">2</span>)),ha=<span class="string">'center'</span>, color = <span class="string">'white'</span>)    </span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend(loc=<span class="string">'upper center'</span>, ncol=<span class="number">4</span>)</span><br><span class="line"><span class="comment"># 显示图形    </span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0k3zz5g9j20b907utae.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="matplotlib-饼图"><a href="#matplotlib-饼图" class="headerlink" title="matplotlib(饼图)"></a>matplotlib(饼图)</h1><h2 id="pie-函数参数解读"><a href="#pie-函数参数解读" class="headerlink" title="pie 函数参数解读"></a>pie 函数参数解读</h2><p>饼图的绘制可以使用matplotlib库中的pie函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plt.pie(x, explode=<span class="literal">None</span>, labels=<span class="literal">None</span>, colors=<span class="literal">None</span>,</span><br><span class="line">        autopct=<span class="literal">None</span>, pctdistance=<span class="number">0.6</span>, shadow=<span class="literal">False</span>,</span><br><span class="line">        labeldistance=<span class="number">1.1</span>, startangle=<span class="literal">None</span>,</span><br><span class="line">        radius=<span class="literal">None</span>, counterclock=<span class="literal">True</span>, wedgeprops=<span class="literal">None</span>,</span><br><span class="line">        textprops=<span class="literal">None</span>, center=(<span class="number">0</span>, <span class="number">0</span>), frame=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><hr><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">指定绘图的数据</td></tr><tr><td align="left">explode</td><td align="left">指定饼图某些部分的突出显示，即呈现爆炸式</td></tr><tr><td align="left">labels</td><td align="left">为饼图添加标签说明，类似于图例说明</td></tr><tr><td align="left">colors</td><td align="left">指定饼图的填充色</td></tr><tr><td align="left">autopct</td><td align="left">自动添加百分比显示，可以采用格式化的方法显示</td></tr><tr><td align="left">pctdistance</td><td align="left">设置百分比标签与圆心的距离</td></tr><tr><td align="left">shadow</td><td align="left">是否添加饼图的阴影效果</td></tr><tr><td align="left">labeldistance</td><td align="left">设置各扇形标签（图例）与圆心的距离</td></tr><tr><td align="left">startangle</td><td align="left">设置饼图的初始摆放角度</td></tr><tr><td align="left">radius</td><td align="left">设置饼图的半径大小</td></tr><tr><td align="left">counterclock</td><td align="left">是否让饼图按逆时针顺序呈现</td></tr><tr><td align="left">wedgeprops</td><td align="left">设置饼图内外边界的属性，如边界线的粗细、颜色等</td></tr><tr><td align="left">textprops</td><td align="left">设置饼图中文本的属性，如字体大小、颜色等</td></tr><tr><td align="left">center</td><td align="left">定饼图的中心点位置，默认为原点</td></tr><tr><td align="left">frame</td><td align="left">是否要显示饼图背后的图框，如果设置为True的话，需要同时控制图框x轴、y轴的范围和饼图的中心位置</td></tr></tbody></table><h2 id="绘制"><a href="#绘制" class="headerlink" title="绘制"></a>绘制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置绘图的主题风格（不妨使用R中的ggplot分隔）</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造数据</span></span><br><span class="line">edu = [<span class="number">0.2515</span>,<span class="number">0.3724</span>,<span class="number">0.3336</span>,<span class="number">0.0368</span>,<span class="number">0.0057</span>]</span><br><span class="line">labels = [<span class="string">'中专'</span>,<span class="string">'大专'</span>,<span class="string">'本科'</span>,<span class="string">'硕士'</span>,<span class="string">'其他'</span>]</span><br><span class="line"></span><br><span class="line">explode = [<span class="number">0</span>,<span class="number">0.1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]  <span class="comment"># 用于突出显示大专学历人群</span></span><br><span class="line">colors=[<span class="string">'#9999ff'</span>,<span class="string">'#ff9999'</span>,<span class="string">'#7777aa'</span>,<span class="string">'#2442aa'</span>,<span class="string">'#dd5555'</span>] <span class="comment"># 自定义颜色</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文乱码和坐标轴负号的处理</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">'SimHei'</span>]</span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 将横、纵坐标轴标准化处理，保证饼图是一个正圆，否则为椭圆</span></span><br><span class="line">plt.axes(aspect=<span class="string">'equal'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 控制x轴和y轴的范围</span></span><br><span class="line">plt.xlim(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制饼图</span></span><br><span class="line">plt.pie(x = edu, <span class="comment"># 绘图数据</span></span><br><span class="line">        explode=explode, <span class="comment"># 突出显示大专人群</span></span><br><span class="line">        labels=labels, <span class="comment"># 添加教育水平标签</span></span><br><span class="line">        colors=colors, <span class="comment"># 设置饼图的自定义填充色</span></span><br><span class="line">        autopct=<span class="string">'%.1f%%'</span>, <span class="comment"># 设置百分比的格式，这里保留一位小数</span></span><br><span class="line">        pctdistance=<span class="number">0.8</span>,  <span class="comment"># 设置百分比标签与圆心的距离</span></span><br><span class="line">        labeldistance = <span class="number">1.15</span>, <span class="comment"># 设置教育水平标签与圆心的距离</span></span><br><span class="line">        startangle = <span class="number">180</span>, <span class="comment"># 设置饼图的初始角度</span></span><br><span class="line">        radius = <span class="number">1.5</span>, <span class="comment"># 设置饼图的半径</span></span><br><span class="line">        counterclock = <span class="literal">False</span>, <span class="comment"># 是否逆时针，这里设置为顺时针方向</span></span><br><span class="line">        wedgeprops = &#123;<span class="string">'linewidth'</span>: <span class="number">1.5</span>, <span class="string">'edgecolor'</span>:<span class="string">'green'</span>&#125;,<span class="comment"># 设置饼图内外边界的属性值</span></span><br><span class="line">        textprops = &#123;<span class="string">'fontsize'</span>:<span class="number">12</span>, <span class="string">'color'</span>:<span class="string">'k'</span>&#125;, <span class="comment"># 设置文本标签的属性值</span></span><br><span class="line">        center = (<span class="number">1.8</span>,<span class="number">1.8</span>), <span class="comment"># 设置饼图的原点</span></span><br><span class="line">        frame = <span class="number">1</span> )<span class="comment"># 是否显示饼图的图框，这里设置显示</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除x轴和y轴的刻度</span></span><br><span class="line">plt.xticks(())</span><br><span class="line">plt.yticks(())</span><br><span class="line"><span class="comment"># 添加图标题</span></span><br><span class="line">plt.title(<span class="string">'芝麻信用失信用户教育水平分布'</span>)</span><br><span class="line">plt.savefig(<span class="string">'饼图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0jh2r431j20c00800t2.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="matplotlib-箱线图"><a href="#matplotlib-箱线图" class="headerlink" title="matplotlib(箱线图)"></a>matplotlib(箱线图)</h1><h2 id="boxplot函数的参数解读"><a href="#boxplot函数的参数解读" class="headerlink" title="boxplot函数的参数解读"></a>boxplot函数的参数解读</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.boxplot(x, notch=<span class="literal">None</span>, sym=<span class="literal">None</span>, vert=<span class="literal">None</span>,</span><br><span class="line">            whis=<span class="literal">None</span>, positions=<span class="literal">None</span>, widths=<span class="literal">None</span>,</span><br><span class="line">            patch_artist=<span class="literal">None</span>, meanline=<span class="literal">None</span>, showmeans=<span class="literal">None</span>,</span><br><span class="line">            showcaps=<span class="literal">None</span>, showbox=<span class="literal">None</span>, showfliers=<span class="literal">None</span>,</span><br><span class="line">            boxprops=<span class="literal">None</span>, labels=<span class="literal">None</span>, flierprops=<span class="literal">None</span>,</span><br><span class="line">            medianprops=<span class="literal">None</span>, meanprops=<span class="literal">None</span>,</span><br><span class="line">            capprops=<span class="literal">None</span>, whiskerprops=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">指定要绘制箱线图的数据</td></tr><tr><td align="left">notch</td><td align="left">是否是凹口的形式展现箱线图，默认非凹口</td></tr><tr><td align="left">sym</td><td align="left">指定异常点的形状，默认为+号显示</td></tr><tr><td align="left">vert</td><td align="left">是否需要将箱线图垂直摆放，默认垂直摆放；</td></tr><tr><td align="left">whis</td><td align="left">指定上下须与上下四分位的距离，默认为1.5倍的四分位差</td></tr><tr><td align="left">positions</td><td align="left">指定箱线图的位置，默认为[0,1,2…]</td></tr><tr><td align="left">widths</td><td align="left">指定箱线图的宽度，默认为0.5</td></tr><tr><td align="left">patch_artist</td><td align="left">是否填充箱体的颜色</td></tr><tr><td align="left">meanline</td><td align="left">是否用线的形式表示均值，默认用点来表示</td></tr><tr><td align="left">showmeans</td><td align="left">是否显示均值，默认不显示</td></tr><tr><td align="left">showcaps</td><td align="left">是否显示箱线图顶端和末端的两条线，默认显示</td></tr><tr><td align="left">showbox</td><td align="left">是否显示箱线图的箱体，默认显示</td></tr><tr><td align="left">showfliers</td><td align="left">是否显示异常值，默认显示</td></tr><tr><td align="left">boxprops</td><td align="left">设置箱体的属性，如边框色，填充色等</td></tr><tr><td align="left">labels</td><td align="left">为箱线图添加标签，类似于图例的作用</td></tr><tr><td align="left">filerprops</td><td align="left">设置异常值的属性，如异常点的形状、大小、填充色等</td></tr><tr><td align="left">medianprops</td><td align="left">设置中位数的属性，如线的类型、粗细等</td></tr><tr><td align="left">meanprops</td><td align="left">设置均值的属性，如点的大小、颜色等</td></tr><tr><td align="left">capprops</td><td align="left">设置箱线图顶端和末端线条的属性，如颜色、粗细等</td></tr><tr><td align="left">whiskerprops</td><td align="left">设置须的属性，如颜色、粗细、线的类型等</td></tr></tbody></table><h2 id="绘制-1"><a href="#绘制-1" class="headerlink" title="绘制"></a>绘制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取Titanic数据集</span></span><br><span class="line">titanic = pd.read_csv(<span class="string">'titanic_train.csv'</span>)</span><br><span class="line"><span class="comment"># 检查年龄是否有缺失</span></span><br><span class="line">any(titanic.Age.isnull())</span><br><span class="line"><span class="comment"># 不妨删除含有缺失年龄的观察</span></span><br><span class="line">titanic.dropna(subset=[<span class="string">'Age'</span>], inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图形的显示风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置中文和负号正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图：整体乘客的年龄箱线图</span></span><br><span class="line">plt.boxplot(x = titanic.Age, <span class="comment"># 指定绘图数据</span></span><br><span class="line">            patch_artist=<span class="literal">True</span>, <span class="comment"># 要求用自定义颜色填充盒形图，默认白色填充</span></span><br><span class="line">            showmeans=<span class="literal">True</span>, <span class="comment"># 以点的形式显示均值</span></span><br><span class="line">            boxprops = &#123;<span class="string">'color'</span>:<span class="string">'black'</span>,<span class="string">'facecolor'</span>:<span class="string">'#9999ff'</span>&#125;, <span class="comment"># 设置箱体属性，填充色和边框色</span></span><br><span class="line">            flierprops = &#123;<span class="string">'marker'</span>:<span class="string">'o'</span>,<span class="string">'markerfacecolor'</span>:<span class="string">'red'</span>,<span class="string">'color'</span>:<span class="string">'black'</span>&#125;, <span class="comment"># 设置异常值属性，点的形状、填充色和边框色</span></span><br><span class="line">            meanprops = &#123;<span class="string">'marker'</span>:<span class="string">'D'</span>,<span class="string">'markerfacecolor'</span>:<span class="string">'indianred'</span>&#125;, <span class="comment"># 设置均值点的属性，点的形状、填充色</span></span><br><span class="line">            medianprops = &#123;<span class="string">'linestyle'</span>:<span class="string">'--'</span>,<span class="string">'color'</span>:<span class="string">'orange'</span>&#125;) <span class="comment"># 设置中位数线的属性，线的类型和颜色</span></span><br><span class="line"><span class="comment"># 设置y轴的范围</span></span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">85</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除箱线图的上边框与右边框的刻度标签</span></span><br><span class="line">plt.tick_params(top=<span class="string">'off'</span>, right=<span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0khch6l1j20c00800sl.jpg" alt=""></div><div class="image-caption"></div></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按舱级排序，为了后面正常显示分组盒形图的顺序</span></span><br><span class="line">titanic.sort_values(by = <span class="string">'Pclass'</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过for循环将不同仓位的年龄人群分别存储到列表Age变量中</span></span><br><span class="line">Age = []</span><br><span class="line">Levels = titanic.Pclass.unique()</span><br><span class="line"><span class="keyword">for</span> Pclass <span class="keyword">in</span> Levels:</span><br><span class="line">    Age.append(titanic.loc[titanic.Pclass==Pclass,<span class="string">'Age'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.boxplot(x = Age,</span><br><span class="line">            patch_artist=<span class="literal">True</span>,</span><br><span class="line">            labels = [<span class="string">'一等舱'</span>,<span class="string">'二等舱'</span>,<span class="string">'三等舱'</span>], <span class="comment"># 添加具体的标签名称</span></span><br><span class="line">            showmeans=<span class="literal">True</span>,</span><br><span class="line">            boxprops = &#123;<span class="string">'color'</span>:<span class="string">'black'</span>,<span class="string">'facecolor'</span>:<span class="string">'#9999ff'</span>&#125;,</span><br><span class="line">            flierprops = &#123;<span class="string">'marker'</span>:<span class="string">'o'</span>,<span class="string">'markerfacecolor'</span>:<span class="string">'red'</span>,<span class="string">'color'</span>:<span class="string">'black'</span>&#125;,</span><br><span class="line">            meanprops = &#123;<span class="string">'marker'</span>:<span class="string">'D'</span>,<span class="string">'markerfacecolor'</span>:<span class="string">'indianred'</span>&#125;,</span><br><span class="line">            medianprops = &#123;<span class="string">'linestyle'</span>:<span class="string">'--'</span>,<span class="string">'color'</span>:<span class="string">'orange'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0kkhvvshj20c0080747.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="matplotlib-直方图"><a href="#matplotlib-直方图" class="headerlink" title="matplotlib(直方图)"></a>matplotlib(直方图)</h1><h2 id="hist函数的参数解读"><a href="#hist函数的参数解读" class="headerlink" title="hist函数的参数解读"></a>hist函数的参数解读</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plt.hist(x, bins=<span class="number">10</span>, range=<span class="literal">None</span>, normed=<span class="literal">False</span>,</span><br><span class="line">        weights=<span class="literal">None</span>, cumulative=<span class="literal">False</span>, bottom=<span class="literal">None</span>,</span><br><span class="line">        histtype=<span class="string">'bar'</span>, align=<span class="string">'mid'</span>, orientation=<span class="string">'vertical'</span>,</span><br><span class="line">        rwidth=<span class="literal">None</span>, log=<span class="literal">False</span>, color=<span class="literal">None</span>,</span><br><span class="line">        label=<span class="literal">None</span>, stacked=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">指定要绘制直方图的数据</td></tr><tr><td align="left">bins</td><td align="left">指定直方图条形的个数</td></tr><tr><td align="left">range</td><td align="left">指定直方图数据的上下界，默认包含绘图数据的最大值和最小值</td></tr><tr><td align="left">normed</td><td align="left">是否将直方图的频数转换成频率</td></tr><tr><td align="left">weights</td><td align="left">该参数可为每一个数据点设置权重</td></tr><tr><td align="left">cumulative</td><td align="left">是否需要计算累计频数或频率</td></tr><tr><td align="left">bottom</td><td align="left">可以为直方图的每个条形添加基准线，默认为0</td></tr><tr><td align="left">histtype</td><td align="left">指定直方图的类型，默认为bar，除此还有’barstacked’, ‘step’,  ‘stepfilled’</td></tr><tr><td align="left">align</td><td align="left">设置条形边界值的对其方式，默认为mid，除此还有’left’和’right’</td></tr><tr><td align="left">orientation</td><td align="left">设置直方图的摆放方向，默认为垂直方向</td></tr><tr><td align="left">rwidth</td><td align="left">设置直方图条形宽度的百分比</td></tr><tr><td align="left">log</td><td align="left">是否需要对绘图数据进行log变换</td></tr><tr><td align="left">color</td><td align="left">设置直方图的填充色</td></tr><tr><td align="left">label</td><td align="left">设置直方图的标签，可通过legend展示其图例</td></tr><tr><td align="left">stacked</td><td align="left">当有多个数据时，是否需要将直方图呈堆叠摆放，默认水平摆放</td></tr></tbody></table><h2 id="一元直方图的绘制"><a href="#一元直方图的绘制" class="headerlink" title="一元直方图的绘制"></a>一元直方图的绘制</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方包</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.mlab <span class="keyword">as</span> mlab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = [<span class="string">'SimHei'</span>]</span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取Titanic数据集</span></span><br><span class="line">titanic = pd.read_csv(<span class="string">'titanic_train.csv'</span>)</span><br><span class="line"><span class="comment"># 检查年龄是否有缺失any(titanic.Age.isnull())</span></span><br><span class="line"><span class="comment"># 不妨删除含有缺失年龄的观察</span></span><br><span class="line">titanic.dropna(subset=[<span class="string">'Age'</span>], inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图形的显示风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"><span class="comment"># 绘图：乘客年龄的频数直方图</span></span><br><span class="line">plt.hist(titanic.Age, <span class="comment"># 绘图数据</span></span><br><span class="line">        bins = <span class="number">20</span>, <span class="comment"># 指定直方图的条形数为20个</span></span><br><span class="line">        color = <span class="string">'steelblue'</span>, <span class="comment"># 指定填充色</span></span><br><span class="line">        edgecolor = <span class="string">'k'</span>, <span class="comment"># 指定直方图的边界色</span></span><br><span class="line">        label = <span class="string">'直方图'</span> )<span class="comment"># 为直方图呈现标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图形顶部边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top=<span class="string">'off'</span>, right=<span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend()</span><br><span class="line">plt.savefig(<span class="string">'直方图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mm4l1gvj20c00803ye.jpg" alt=""></div><div class="image-caption"></div></figure><h2 id="累计频率直方图"><a href="#累计频率直方图" class="headerlink" title="累计频率直方图"></a>累计频率直方图</h2><ul><li>上图绘制的是年龄的频数直方图，从整体的分布来看，有点像正态分布，两边低中间高的倒钟形状。除此，我们还可以绘制累计频率直方图，并且设置5岁为组距，如下代码可以表示成：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘图：乘客年龄的累计频率直方图</span></span><br><span class="line">plt.hist(titanic.Age, <span class="comment"># 绘图数据</span></span><br><span class="line">        bins = np.arange(titanic.Age.min(),titanic.Age.max(),<span class="number">5</span>), <span class="comment"># 指定直方图的组距</span></span><br><span class="line">        normed = <span class="literal">True</span>, <span class="comment"># 设置为频率直方图</span></span><br><span class="line">        cumulative = <span class="literal">True</span>, <span class="comment"># 积累直方图</span></span><br><span class="line">        color = <span class="string">'steelblue'</span>, <span class="comment"># 指定填充色</span></span><br><span class="line">        edgecolor = <span class="string">'k'</span>, <span class="comment"># 指定直方图的边界色</span></span><br><span class="line">        label = <span class="string">'直方图'</span> )<span class="comment"># 为直方图呈现标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置坐标轴标签和标题</span></span><br><span class="line">plt.title(<span class="string">'乘客年龄的频率累计直方图'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'年龄'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'累计频率'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图形顶部边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top=<span class="string">'off'</span>, right=<span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend(loc = <span class="string">'best'</span>)</span><br><span class="line">plt.savefig(<span class="string">'乘客年龄的累计频率直方图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0knyeutbj20c0080mx8.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="正太分布图"><a href="#正太分布图" class="headerlink" title="正太分布图"></a>正太分布图</h1><ul><li>通过累计频率直方图就可以快速的发现什么年龄段的人数占了多少比重，例如35岁以下的乘客占了7成，这种图的解读有点像帕累托图。为了测试数据集是否近似服从正态分布，需要在直方图的基础上再绘制两条线，一条表示理论的正态分布曲线，另一条为核密度曲线，目的就是比较两条曲线的吻合度，越吻合就说明数据越近似于正态分布。接下来我们就在直方图的基础上再添加两条曲线：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正太分布图</span></span><br><span class="line">plt.hist(titanic.Age, <span class="comment"># 绘图数据</span></span><br><span class="line">        bins = np.arange(titanic.Age.min(),titanic.Age.max(),<span class="number">5</span>), <span class="comment"># 指定直方图的组距</span></span><br><span class="line">        normed = <span class="literal">True</span>, <span class="comment"># 设置为频率直方图</span></span><br><span class="line">        color = <span class="string">'steelblue'</span>, <span class="comment"># 指定填充色</span></span><br><span class="line">        edgecolor = <span class="string">'k'</span>) <span class="comment"># 指定直方图的边界色</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置坐标轴标签和标题</span></span><br><span class="line">plt.title(<span class="string">'乘客年龄直方图'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'年龄'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'频率'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成正态曲线的数据</span></span><br><span class="line">x1 = np.linspace(titanic.Age.min(), titanic.Age.max(), <span class="number">1000</span>)</span><br><span class="line">normal = mlab.normpdf(x1, titanic.Age.mean(), titanic.Age.std())</span><br><span class="line"><span class="comment"># 绘制正态分布曲线</span></span><br><span class="line">line1, = plt.plot(x1,normal,<span class="string">'r-'</span>, linewidth = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成核密度曲线的数据</span></span><br><span class="line">kde = mlab.GaussianKDE(titanic.Age)</span><br><span class="line">x2 = np.linspace(titanic.Age.min(), titanic.Age.max(), <span class="number">1000</span>)</span><br><span class="line"><span class="comment"># 绘制</span></span><br><span class="line">line2, = plt.plot(x2,kde(x2),<span class="string">'g-'</span>, linewidth = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图形顶部边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top=<span class="string">'off'</span>, right=<span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend([line1, line2],[<span class="string">'正态分布曲线'</span>,<span class="string">'核密度曲线'</span>],loc=<span class="string">'best'</span>)</span><br><span class="line">plt.savefig(<span class="string">'正太分布图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0kp9cxanj20c0080jrt.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="二元直方图的绘制"><a href="#二元直方图的绘制" class="headerlink" title="二元直方图的绘制"></a>二元直方图的绘制</h1><ul><li>上面绘制的直方图都是基于所有乘客的年龄，如果想对比男女乘客的年龄直方图的话，我们可以通过两个hist将不同性别的直方图绘制到一张图内，具体代码如下：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提取不同性别的年龄数据</span></span><br><span class="line">age_female = titanic.Age[titanic.Sex == <span class="string">'female'</span>]</span><br><span class="line">age_male = titanic.Age[titanic.Sex == <span class="string">'male'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置直方图的组距</span></span><br><span class="line">bins = np.arange(titanic.Age.min(), titanic.Age.max(), <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 男性乘客年龄直方图</span></span><br><span class="line">plt.hist(age_male, bins = bins, label = <span class="string">'男性'</span>, color = <span class="string">'steelblue'</span>, alpha = <span class="number">0.7</span>)</span><br><span class="line"><span class="comment"># 女性乘客年龄直方图</span></span><br><span class="line">plt.hist(age_female, bins = bins, label = <span class="string">'女性'</span>, alpha = <span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置坐标轴标签和标题</span></span><br><span class="line">plt.title(<span class="string">'乘客年龄直方图'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'年龄'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'人数'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图形顶部边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top=<span class="string">'off'</span>, right=<span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend()</span><br><span class="line">plt.savefig(<span class="string">'二元直方图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0krsx0j5j20c0080t8q.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="matplotlib-折线图"><a href="#matplotlib-折线图" class="headerlink" title="matplotlib(折线图)"></a>matplotlib(折线图)</h1><h2 id="plot函数的参数解读"><a href="#plot函数的参数解读" class="headerlink" title="plot函数的参数解读"></a>plot函数的参数解读</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plt.hist(x,y,linestyle,</span><br><span class="line">    linewidth,color,marker,</span><br><span class="line">    markersize,markeredgecolor,</span><br><span class="line">    markerfactcolor,label,alpha)</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">指定折线图的x轴数据</td></tr><tr><td align="left">y</td><td align="left">指定折线图的y轴数据</td></tr><tr><td align="left">linestyle</td><td align="left">指定折线的类型，可以是实线、虚线、点虚线、点点线等，默认文实线</td></tr><tr><td align="left">linewidth</td><td align="left">指定折线的宽度</td></tr><tr><td align="left">marker</td><td align="left">可以为折线图添加点，该参数是设置点的形状</td></tr><tr><td align="left">markersize</td><td align="left">设置点的大小</td></tr><tr><td align="left">markeredgecolor</td><td align="left">设置点的边框色</td></tr><tr><td align="left">markerfactcolor</td><td align="left">设置点的填充色</td></tr><tr><td align="left">label</td><td align="left">为折线图添加标签，类似于图例的作用</td></tr></tbody></table><h1 id="一元折线图的绘制"><a href="#一元折线图的绘制" class="headerlink" title="一元折线图的绘制"></a>一元折线图的绘制</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置绘图风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"><span class="comment"># 设置中文编码和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取需要绘图的数据</span></span><br><span class="line">article_reading = pd.read_excel(<span class="string">'wechart.xlsx'</span>)</span><br><span class="line"><span class="comment"># 取出8月份至9月28日的数据</span></span><br><span class="line">sub_data = article_reading.loc[article_reading.date &gt;= <span class="string">'2017-08-01'</span> ,:]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图框的大小</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.plot(sub_data.date, <span class="comment"># x轴数据</span></span><br><span class="line">         sub_data.article_reading_cnts, <span class="comment"># y轴数据</span></span><br><span class="line">         linestyle = <span class="string">'-'</span>, <span class="comment"># 折线类型</span></span><br><span class="line">         linewidth = <span class="number">2</span>, <span class="comment"># 折线宽度</span></span><br><span class="line">         color = <span class="string">'steelblue'</span>, <span class="comment"># 折线颜色</span></span><br><span class="line">         marker = <span class="string">'o'</span>, <span class="comment"># 点的形状</span></span><br><span class="line">         markersize = <span class="number">6</span>, <span class="comment"># 点的大小</span></span><br><span class="line">         markeredgecolor=<span class="string">'black'</span>, <span class="comment"># 点的边框色</span></span><br><span class="line">         markerfacecolor=<span class="string">'brown'</span>) <span class="comment"># 点的填充色</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和坐标轴标签</span></span><br><span class="line">plt.title(<span class="string">'公众号每天阅读人数趋势图'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'日期'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'人数'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 剔除图框上边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了避免x轴日期刻度标签的重叠，设置x轴刻度自动展现，并且45度倾斜</span></span><br><span class="line">fig.autofmt_xdate(rotation = <span class="number">45</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ul><li>由于x轴是日期型数据，当数据量一多的时候，就会导致刻度标签的重叠或拥挤，为了防止重叠的产生，我们需要让日期型的x轴刻度标签自动展现，从而避免重叠的现象</li></ul><h2 id="图形优化"><a href="#图形优化" class="headerlink" title="图形优化"></a>图形优化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图框的大小</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.plot(sub_data.date, <span class="comment"># x轴数据</span></span><br><span class="line">         sub_data.article_reading_cnts, <span class="comment"># y轴数据</span></span><br><span class="line">         linestyle = <span class="string">'-'</span>, <span class="comment"># 折线类型</span></span><br><span class="line">         linewidth = <span class="number">2</span>, <span class="comment"># 折线宽度</span></span><br><span class="line">         color = <span class="string">'steelblue'</span>, <span class="comment"># 折线颜色</span></span><br><span class="line">         marker = <span class="string">'o'</span>, <span class="comment"># 点的形状</span></span><br><span class="line">         markersize = <span class="number">6</span>, <span class="comment"># 点的大小</span></span><br><span class="line">         markeredgecolor=<span class="string">'black'</span>, <span class="comment"># 点的边框色</span></span><br><span class="line">         markerfacecolor=<span class="string">'steelblue'</span>) <span class="comment"># 点的填充色</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和坐标轴标签</span></span><br><span class="line">plt.title(<span class="string">'公众号每天阅读人数趋势图'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'日期'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'人数'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 剔除图框上边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图的坐标信息</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line"><span class="comment"># 设置日期的显示格式  </span></span><br><span class="line">date_format = mpl.dates.DateFormatter(<span class="string">"%Y-%m-%d"</span>)  </span><br><span class="line">ax.xaxis.set_major_formatter(date_format)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴显示多少个日期刻度</span></span><br><span class="line"><span class="comment">#xlocator = mpl.ticker.LinearLocator(10)</span></span><br><span class="line"><span class="comment"># 设置x轴每个刻度的间隔天数</span></span><br><span class="line">xlocator = mpl.ticker.MultipleLocator(<span class="number">5</span>)</span><br><span class="line">ax.xaxis.set_major_locator(xlocator)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了避免x轴日期刻度标签的重叠，设置x轴刻度自动展现，并且45度倾斜</span></span><br><span class="line">fig.autofmt_xdate(rotation = <span class="number">45</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图形</span></span><br></pre></td></tr></table></figure><h1 id="多元折线图的绘制"><a href="#多元折线图的绘制" class="headerlink" title="多元折线图的绘制"></a>多元折线图的绘制</h1><ul><li>如果你需要在一张图形中画上两条折线图，也很简单，只需要在代码中写入两次plot函数即可，其他都不需要改动了。具体可以参考下面的代码逻辑：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置图框的大小</span></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">10</span>,<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图--阅读人数趋势</span></span><br><span class="line">plt.plot(sub_data.date, <span class="comment"># x轴数据</span></span><br><span class="line">         sub_data.article_reading_cnts, <span class="comment"># y轴数据</span></span><br><span class="line">         linestyle = <span class="string">'-'</span>, <span class="comment"># 折线类型</span></span><br><span class="line">         linewidth = <span class="number">2</span>, <span class="comment"># 折线宽度</span></span><br><span class="line">         color = <span class="string">'steelblue'</span>, <span class="comment"># 折线颜色</span></span><br><span class="line">         marker = <span class="string">'o'</span>, <span class="comment"># 点的形状</span></span><br><span class="line">         markersize = <span class="number">6</span>, <span class="comment"># 点的大小</span></span><br><span class="line">         markeredgecolor=<span class="string">'black'</span>, <span class="comment"># 点的边框色</span></span><br><span class="line">         markerfacecolor=<span class="string">'steelblue'</span>, <span class="comment"># 点的填充色</span></span><br><span class="line">         label = <span class="string">'阅读人数'</span>) <span class="comment"># 添加标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图--阅读人次趋势</span></span><br><span class="line">plt.plot(sub_data.date, <span class="comment"># x轴数据</span></span><br><span class="line">         sub_data.article_reading_times, <span class="comment"># y轴数据</span></span><br><span class="line">         linestyle = <span class="string">'-'</span>, <span class="comment"># 折线类型</span></span><br><span class="line">         linewidth = <span class="number">2</span>, <span class="comment"># 折线宽度</span></span><br><span class="line">         color = <span class="string">'#ff9999'</span>, <span class="comment"># 折线颜色</span></span><br><span class="line">         marker = <span class="string">'o'</span>, <span class="comment"># 点的形状</span></span><br><span class="line">         markersize = <span class="number">6</span>, <span class="comment"># 点的大小</span></span><br><span class="line">         markeredgecolor=<span class="string">'black'</span>, <span class="comment"># 点的边框色</span></span><br><span class="line">         markerfacecolor=<span class="string">'#ff9999'</span>, <span class="comment"># 点的填充色</span></span><br><span class="line">         label = <span class="string">'阅读人次'</span>) <span class="comment"># 添加标签</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和坐标轴标签</span></span><br><span class="line">plt.title(<span class="string">'公众号每天阅读人数和人次趋势图'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'日期'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'人数'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 剔除图框上边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取图的坐标信息</span></span><br><span class="line">ax = plt.gca()</span><br><span class="line"><span class="comment"># 设置日期的显示格式  </span></span><br><span class="line">date_format = mpl.dates.DateFormatter(<span class="string">'%m-%d'</span>)  </span><br><span class="line">ax.xaxis.set_major_formatter(date_format)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴显示多少个日期刻度</span></span><br><span class="line"><span class="comment">#xlocator = mpl.ticker.LinearLocator(10)</span></span><br><span class="line"><span class="comment"># 设置x轴每个刻度的间隔天数</span></span><br><span class="line">xlocator = mpl.ticker.MultipleLocator(<span class="number">3</span>)</span><br><span class="line">ax.xaxis.set_major_locator(xlocator)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了避免x轴日期刻度标签的重叠，设置x轴刻度自动展现，并且45度倾斜</span></span><br><span class="line">fig.autofmt_xdate(rotation = <span class="number">45</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend()</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="matplotlib-散点图"><a href="#matplotlib-散点图" class="headerlink" title="matplotlib(散点图)"></a>matplotlib(散点图)</h1><h2 id="scatter函数的参数解读"><a href="#scatter函数的参数解读" class="headerlink" title="scatter函数的参数解读"></a>scatter函数的参数解读</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lt.scatter(x, y, s=<span class="number">20</span>,</span><br><span class="line">            c=<span class="literal">None</span>, marker=<span class="string">'o'</span>,</span><br><span class="line">            cmap=<span class="literal">None</span>, norm=<span class="literal">None</span>,</span><br><span class="line">            vmin=<span class="literal">None</span>, vmax=<span class="literal">None</span>,</span><br><span class="line">            alpha=<span class="literal">None</span>, linewidths=<span class="literal">None</span>,</span><br><span class="line">            edgecolors=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">指定散点图的x轴数据</td></tr><tr><td align="left">y</td><td align="left">指定散点图的y轴数据</td></tr><tr><td align="left">s</td><td align="left">指定散点图点的大小，默认为20，通过传入新的变量，实现气泡图的绘制</td></tr><tr><td align="left">c</td><td align="left">指定散点图点的颜色，默认为蓝色</td></tr><tr><td align="left">marker</td><td align="left">指定散点图点的形状，默认为圆形</td></tr><tr><td align="left">cmap</td><td align="left">指定色图，只有当c参数是一个浮点型的数组的时候才起作用</td></tr><tr><td align="left">norm</td><td align="left">设置数据亮度，标准化到0~1之间，使用该参数仍需要c为浮点型的数组</td></tr><tr><td align="left">vmin、vmax</td><td align="left">亮度设置，与norm类似，如果使用了norm则该参数无效</td></tr><tr><td align="left">alpha</td><td align="left">设置散点的透明度</td></tr><tr><td align="left">linewidths</td><td align="left">设置散点边界线的宽度</td></tr><tr><td align="left">edgecolors</td><td align="left">设置散点边界线的颜色</td></tr></tbody></table><h1 id="一般散点图的绘制"><a href="#一般散点图的绘制" class="headerlink" title="一般散点图的绘制"></a>一般散点图的绘制</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入模块</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置绘图风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"><span class="comment"># 设置中文编码和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读入数据</span></span><br><span class="line">cars = pd.read_csv(<span class="string">'cars.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">plt.scatter(cars.speed, <span class="comment"># x轴数据为汽车速度</span></span><br><span class="line">            cars.dist, <span class="comment"># y轴数据为汽车的刹车距离</span></span><br><span class="line">            s = <span class="number">30</span>, <span class="comment"># 设置点的大小</span></span><br><span class="line">            c = <span class="string">'steelblue'</span>, <span class="comment"># 设置点的颜色</span></span><br><span class="line">            marker = <span class="string">'s'</span>, <span class="comment"># 设置点的形状</span></span><br><span class="line">            alpha = <span class="number">0.9</span>, <span class="comment"># 设置点的透明度</span></span><br><span class="line">            linewidths = <span class="number">0.3</span>, <span class="comment"># 设置散点边界的粗细</span></span><br><span class="line">            edgecolors = <span class="string">'red'</span> <span class="comment"># 设置散点边界的颜色</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加轴标签和标题plt.title('汽车速度与刹车距离的关系')</span></span><br><span class="line">plt.xlabel(<span class="string">'汽车速度'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'刹车距离'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图边框的顶部刻度和右边刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line">plt.savefig(<span class="string">'一般散点图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mqe23jgj20c0080q2w.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="分组散点图的绘制"><a href="#分组散点图的绘制" class="headerlink" title="分组散点图的绘制"></a>分组散点图的绘制</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">iris = pd.read_csv(<span class="string">'iris.csv'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置中文编码和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义颜色</span></span><br><span class="line">colors = [<span class="string">'steelblue'</span>, <span class="string">'#9999ff'</span>, <span class="string">'#ff9999'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 三种不同的花品种</span></span><br><span class="line">Species = iris.Species.unique()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过循环的方式，完成分组散点图的绘制</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(Species)):</span><br><span class="line">    plt.scatter(iris.loc[iris.Species == Species[i], <span class="string">'Petal.Length'</span>],</span><br><span class="line">                iris.loc[iris.Species == Species[i], <span class="string">'Petal.Width'</span>],</span><br><span class="line">                s = <span class="number">35</span>, c = colors[i], label = Species[i])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加轴标签和标题</span></span><br><span class="line">plt.title(<span class="string">'花瓣长度与宽度的关系'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'花瓣长度'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'花瓣宽度'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图边框的顶部刻度和右边刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 添加图例</span></span><br><span class="line">plt.legend(loc = <span class="string">'upper left'</span>)</span><br><span class="line">plt.savefig(<span class="string">'分组散点图.png'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mt6kcxgj20c0080q35.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="气泡图的绘制"><a href="#气泡图的绘制" class="headerlink" title="气泡图的绘制"></a>气泡图的绘制</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方包</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置中文编码和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">sales = pd.read_excel(<span class="string">'sales.xlsx'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制气泡图</span></span><br><span class="line">plt.scatter(sales.finish_ratio,</span><br><span class="line">            sales.profit_ratio,</span><br><span class="line">            c = <span class="string">'steelblue'</span>,</span><br><span class="line">            s = sales.tot_target/<span class="number">30</span>,</span><br><span class="line">            edgecolor = <span class="string">'black'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 改变轴刻度的显示方式（百分比形式）</span></span><br><span class="line">plt.xticks(np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>), [str(i*<span class="number">100</span>)+<span class="string">'%'</span> <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>)])</span><br><span class="line">plt.yticks(np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>), [str(i*<span class="number">100</span>)+<span class="string">'%'</span> <span class="keyword">for</span> i <span class="keyword">in</span> np.arange(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0.1</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置x轴和y轴的数值范围</span></span><br><span class="line">plt.xlim(<span class="number">0.2</span>, <span class="number">0.7</span>)</span><br><span class="line">plt.ylim(<span class="number">0.25</span>, <span class="number">0.85</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加轴标签和标题</span></span><br><span class="line">plt.title(<span class="string">'完成率与利润率的关系'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'完成率'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'利润率'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图边框的顶部刻度和右边刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0mvachvuj20c0080dg0.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="散点图-线性回归线"><a href="#散点图-线性回归线" class="headerlink" title="散点图+线性回归线"></a>散点图+线性回归线</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"></span><br><span class="line"><span class="comment"># 散点图</span></span><br><span class="line">plt.scatter(cars.speed, <span class="comment"># x轴数据为汽车速度</span></span><br><span class="line">            cars.dist, <span class="comment"># y轴数据为汽车的刹车距离</span></span><br><span class="line">            s = <span class="number">30</span>, <span class="comment"># 设置点的大小</span></span><br><span class="line">            c = <span class="string">'black'</span>, <span class="comment"># 设置点的颜色</span></span><br><span class="line">            marker = <span class="string">'o'</span>, <span class="comment"># 设置点的形状</span></span><br><span class="line">            alpha = <span class="number">0.9</span>, <span class="comment"># 设置点的透明度</span></span><br><span class="line">            linewidths = <span class="number">0.3</span>, <span class="comment"># 设置散点边界的粗细</span></span><br><span class="line">            label = <span class="string">'观测点'</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建模</span></span><br><span class="line">reg = LinearRegression().fit(cars.speed.reshape(<span class="number">-1</span>,<span class="number">1</span>), cars.dist)</span><br><span class="line"><span class="comment"># 回归预测值</span></span><br><span class="line">pred = reg.predict(cars.speed.reshape(<span class="number">-1</span>,<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制回归线</span></span><br><span class="line">plt.plot(cars.speed, pred, linewidth = <span class="number">2</span>, label = <span class="string">'回归线'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加轴标签和标题</span></span><br><span class="line">plt.title(<span class="string">'汽车速度与刹车距离的关系'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'汽车速度'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'刹车距离'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除图边框的顶部刻度和右边刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 显示图例</span></span><br><span class="line">plt.legend(loc = <span class="string">'upper left'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="matplotlib-雷达图"><a href="#matplotlib-雷达图" class="headerlink" title="matplotlib(雷达图)"></a>matplotlib(雷达图)</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用ggplot的绘图风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造数据</span></span><br><span class="line">values = [<span class="number">3.2</span>,<span class="number">2.1</span>,<span class="number">3.5</span>,<span class="number">2.8</span>,<span class="number">3</span>]</span><br><span class="line">feature = [<span class="string">'个人能力'</span>,<span class="string">'QC知识'</span>,<span class="string">'解决问题能力'</span>,<span class="string">'服务质量意识'</span>,<span class="string">'团队精神'</span>]</span><br><span class="line"></span><br><span class="line">N = len(values)</span><br><span class="line"><span class="comment"># 设置雷达图的角度，用于平分切开一个圆面</span></span><br><span class="line">angles=np.linspace(<span class="number">0</span>, <span class="number">2</span>*np.pi, N, endpoint=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为了使雷达图一圈封闭起来，需要下面的步骤</span></span><br><span class="line">values=np.concatenate((values,[values[<span class="number">0</span>]]))</span><br><span class="line">angles=np.concatenate((angles,[angles[<span class="number">0</span>]]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">fig=plt.figure()</span><br><span class="line"><span class="comment"># 这里一定要设置为极坐标格式</span></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, polar=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 绘制折线图</span></span><br><span class="line">ax.plot(angles, values, <span class="string">'o-'</span>, linewidth=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 填充颜色</span></span><br><span class="line">ax.fill(angles, values, alpha=<span class="number">0.25</span>)</span><br><span class="line"><span class="comment"># 添加每个特征的标签</span></span><br><span class="line">ax.set_thetagrids(angles * <span class="number">180</span>/np.pi, feature)</span><br><span class="line"><span class="comment"># 设置雷达图的范围</span></span><br><span class="line">ax.set_ylim(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 添加标题</span></span><br><span class="line">plt.title(<span class="string">'活动前后员工状态表现'</span>)</span><br><span class="line"><span class="comment"># 添加网格线</span></span><br><span class="line">ax.grid(<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0m6gdokgj20c0080aai.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="多条线的雷达图"><a href="#多条线的雷达图" class="headerlink" title="多条线的雷达图"></a>多条线的雷达图</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 中文和负号的正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用ggplot的绘图风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造数据</span></span><br><span class="line">values = [<span class="number">3.2</span>,<span class="number">2.1</span>,<span class="number">3.5</span>,<span class="number">2.8</span>,<span class="number">3</span>]</span><br><span class="line">values2 = [<span class="number">4</span>,<span class="number">4.1</span>,<span class="number">4.5</span>,<span class="number">4</span>,<span class="number">4.1</span>]</span><br><span class="line">feature = [<span class="string">'个人能力'</span>,<span class="string">'QC知识'</span>,<span class="string">'解决问题能力'</span>,<span class="string">'服务质量意识'</span>,<span class="string">'团队精神'</span>]</span><br><span class="line"></span><br><span class="line">N = len(values)</span><br><span class="line"><span class="comment"># 设置雷达图的角度，用于平分切开一个圆面</span></span><br><span class="line">angles=np.linspace(<span class="number">0</span>, <span class="number">2</span>*np.pi, N, endpoint=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 为了使雷达图一圈封闭起来，需要下面的步骤</span></span><br><span class="line">values=np.concatenate((values,[values[<span class="number">0</span>]]))</span><br><span class="line">values2=np.concatenate((values2,[values2[<span class="number">0</span>]]))</span><br><span class="line">angles=np.concatenate((angles,[angles[<span class="number">0</span>]]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">fig=plt.figure()</span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, polar=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 绘制折线图</span></span><br><span class="line">ax.plot(angles, values, <span class="string">'o-'</span>, linewidth=<span class="number">2</span>, label = <span class="string">'活动前'</span>)</span><br><span class="line"><span class="comment"># 填充颜色</span></span><br><span class="line">ax.fill(angles, values, alpha=<span class="number">0.25</span>)</span><br><span class="line"><span class="comment"># 绘制第二条折线图</span></span><br><span class="line">ax.plot(angles, values2, <span class="string">'o-'</span>, linewidth=<span class="number">2</span>, label = <span class="string">'活动后'</span>)</span><br><span class="line">ax.fill(angles, values2, alpha=<span class="number">0.25</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加每个特征的标签</span></span><br><span class="line">ax.set_thetagrids(angles * <span class="number">180</span>/np.pi, feature)</span><br><span class="line"><span class="comment"># 设置雷达图的范围</span></span><br><span class="line">ax.set_ylim(<span class="number">0</span>,<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 添加标题</span></span><br><span class="line">plt.title(<span class="string">'活动前后员工状态表现'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加网格线</span></span><br><span class="line">ax.grid(<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 设置图例</span></span><br><span class="line">plt.legend(loc = <span class="string">'best'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0m7o9accj20c0080mxt.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="pygal模块则提供了更加简单的雷达图函数"><a href="#pygal模块则提供了更加简单的雷达图函数" class="headerlink" title="pygal模块则提供了更加简单的雷达图函数"></a>pygal模块则提供了更加简单的雷达图函数</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> pygal</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用Radar这个类，并设置雷达图的填充，及数据范围</span></span><br><span class="line">radar_chart = pygal.Radar(fill = <span class="literal">True</span>, range=(<span class="number">0</span>,<span class="number">5</span>))</span><br><span class="line"><span class="comment"># 添加雷达图的标题</span></span><br><span class="line">radar_chart.title = <span class="string">'活动前后员工状态表现'</span></span><br><span class="line"><span class="comment"># 添加雷达图各顶点的含义</span></span><br><span class="line">radar_chart.x_labels = [<span class="string">'个人能力'</span>,<span class="string">'QC知识'</span>,<span class="string">'解决问题能力'</span>,<span class="string">'服务质量意识'</span>,<span class="string">'团队精神'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制两条雷达图区域</span></span><br><span class="line">radar_chart.add(<span class="string">'活动前'</span>, [<span class="number">3.2</span>,<span class="number">2.1</span>,<span class="number">3.5</span>,<span class="number">2.8</span>,<span class="number">3</span>])</span><br><span class="line">radar_chart.add(<span class="string">'活动后'</span>, [<span class="number">4</span>,<span class="number">4.1</span>,<span class="number">4.5</span>,<span class="number">4</span>,<span class="number">4.1</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存图像</span></span><br><span class="line">radar_chart.render_to_file(<span class="string">'radar_chart.svg'</span>)</span><br></pre></td></tr></table></figure><h1 id="matplotlib-面积图"><a href="#matplotlib-面积图" class="headerlink" title="matplotlib(面积图)"></a>matplotlib(面积图)</h1><h2 id="stackplot函数语法及参数含义"><a href="#stackplot函数语法及参数含义" class="headerlink" title="stackplot函数语法及参数含义"></a>stackplot函数语法及参数含义</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stackplot(x,*args,**kargs)</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">指定面积图的x轴数据</td></tr><tr><td align="left">*args</td><td align="left">为可变参数，可以接受任意多的y轴数据，即各个拆分的数据对象</td></tr><tr><td align="left">**kargs</td><td align="left">为关键字参数，可以通过传递其他参数来修饰面积图，如标签、颜色</td></tr></tbody></table><hr><ul><li>可用的关键字参数：</li></ul><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">labels</td><td align="left">以列表的形式传递每一块面积图包含的标签，通过图例展现</td></tr><tr><td align="left">colors</td><td align="left">设置不同的颜色填充面积图</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ========== Python3 + Jupyter ========== #</span></span><br><span class="line"><span class="comment"># 导入第三方模块</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图形的显示风格</span></span><br><span class="line">plt.style.use(<span class="string">'ggplot'</span>)</span><br><span class="line"><span class="comment"># 设置中文和负号正常显示</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数据</span></span><br><span class="line">transport = pd.read_excel(<span class="string">'transport.xls'</span>)</span><br><span class="line"><span class="comment"># 窥探数据框的前5行</span></span><br><span class="line">transport.head()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 折线图的x变量值，即Jan（一月份）到Aug（八月份）8个值</span></span><br><span class="line">N = np.arange(transport.shape[<span class="number">1</span>]<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制拆分的折线图</span></span><br><span class="line">labels = transport.Index</span><br><span class="line">channel = transport.columns[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(transport.shape[<span class="number">0</span>]):</span><br><span class="line">    plt.plot(N, <span class="comment"># x坐标</span></span><br><span class="line">             transport.loc[i,<span class="string">'Jan'</span>:<span class="string">'Aug'</span>], <span class="comment"># y坐标</span></span><br><span class="line">             label = labels[i], <span class="comment"># 添加标签</span></span><br><span class="line">             marker = <span class="string">'o'</span>, <span class="comment"># 给折线图添加圆形点</span></span><br><span class="line">             linewidth = <span class="number">2</span> <span class="comment"># 设置线的宽度</span></span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和坐标轴标签</span></span><br><span class="line">plt.title(<span class="string">'2017年各运输渠道的运输量'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'运输量(万吨)'</span>)</span><br><span class="line"><span class="comment"># 修改x轴的刻度标签</span></span><br><span class="line">plt.xticks(N,channel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 剔除图框上边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例（即显示label的效果）  </span></span><br><span class="line">plt.legend(loc = <span class="string">'best'</span>)  </span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><ul><li>这就是绘制分组的折线图思想，虽然折线图能够反映各个渠道的运输量随月份的波动趋势，但无法观察到1月份到8月份的各自总量。接下来我们看看面积图的展现。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">x = N</span><br><span class="line"><span class="comment"># 将铁路运输、公路运输和水路运输各月的值提取出来，存储到y1~y3</span></span><br><span class="line"><span class="comment"># 千万千万记得，提取出数据框的一列时，需要将序列的数据类型进行强制转换，否则会报错</span></span><br><span class="line">y1 = transport.loc[<span class="number">0</span>,<span class="string">'Jan'</span>:<span class="string">'Aug'</span>].astype(<span class="string">'int'</span>)</span><br><span class="line">y2 = transport.loc[<span class="number">1</span>,<span class="string">'Jan'</span>:<span class="string">'Aug'</span>].astype(<span class="string">'int'</span>)</span><br><span class="line">y3 = transport.loc[<span class="number">2</span>,<span class="string">'Jan'</span>:<span class="string">'Aug'</span>].astype(<span class="string">'int'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义各区块面积的含义</span></span><br><span class="line">colors = [<span class="string">'#ff9999'</span>,<span class="string">'#9999ff'</span>,<span class="string">'#cc1234'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制面积图</span></span><br><span class="line">plt.stackplot(x, <span class="comment"># x轴</span></span><br><span class="line">              y1,y2,y3, <span class="comment"># 可变参数，接受多个y</span></span><br><span class="line">              labels = labels, <span class="comment"># 定义各区块面积的含义</span></span><br><span class="line">              colors = colors <span class="comment"># 设置各区块的填充色</span></span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加标题和坐标轴标签</span></span><br><span class="line">plt.title(<span class="string">'2017年各运输渠道的运输量'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'累积运输量(万吨)'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改x轴的刻度</span></span><br><span class="line">plt.xticks(N,channel)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 剔除图框上边界和右边界的刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示图例（即显示labels的效果）  </span></span><br><span class="line">plt.legend(loc = <span class="string">'upper left'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="matplotlib-树地图"><a href="#matplotlib-树地图" class="headerlink" title="matplotlib(树地图)"></a>matplotlib(树地图)</h1><h2 id="squarify-plot函数"><a href="#squarify-plot函数" class="headerlink" title="squarify.plot函数"></a>squarify.plot函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">squarify.plot(sizes,</span><br><span class="line">        norm_x=<span class="number">100</span>,</span><br><span class="line">        norm_y=<span class="number">100</span>,</span><br><span class="line">        color=<span class="literal">None</span>,</span><br><span class="line">        label=<span class="literal">None</span>,</span><br><span class="line">        value=<span class="literal">None</span>,</span><br><span class="line">        alpha,</span><br><span class="line">        **kwargs)</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">参数</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">sizes</td><td align="left">指定离散变量各水平对应的数值，即反映树地图子块的面积大小</td></tr><tr><td align="left">norm_x</td><td align="left">默认将x轴的范围限定在0-100之内</td></tr><tr><td align="left">norm_y</td><td align="left">默认将y轴的范围限定在0-100之内</td></tr><tr><td align="left">color</td><td align="left">自定义设置树地图子块的填充色</td></tr><tr><td align="left">label</td><td align="left">为每个子块指定标签</td></tr><tr><td align="left">value</td><td align="left">为每个子块添加数值大小的标签</td></tr><tr><td align="left">alpha</td><td align="left">设置填充色的透明度</td></tr><tr><td align="left">**kwargs</td><td align="left">关键字参数，与条形图的关键字参数类似，如设置边框色、边框粗细等</td></tr></tbody></table><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入第三方包</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> squarify</span><br><span class="line"></span><br><span class="line"><span class="comment">#中文及负号处理办法</span></span><br><span class="line">plt.rcParams[<span class="string">'font.sans-serif'</span>] = <span class="string">'SimHei'</span></span><br><span class="line">plt.rcParams[<span class="string">'axes.unicode_minus'</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据</span></span><br><span class="line">name = [<span class="string">'国内增值税'</span>,<span class="string">'国内消费税'</span>,<span class="string">'企业所得税'</span>,<span class="string">'个人所得税'</span>,</span><br><span class="line">        <span class="string">'进口增值税、消费税'</span>,<span class="string">'出口退税'</span>,<span class="string">'城市维护建设税'</span>,</span><br><span class="line">        <span class="string">'车辆购置税'</span>,<span class="string">'印花税'</span>,<span class="string">'资源税'</span>,<span class="string">'土地和房税'</span>,<span class="string">'车船税烟叶税等'</span>]</span><br><span class="line">income = [<span class="number">3908</span>,<span class="number">856</span>,<span class="number">801</span>,<span class="number">868</span>,<span class="number">1361</span>,<span class="number">1042</span>,<span class="number">320</span>,<span class="number">291</span>,<span class="number">175</span>,<span class="number">111</span>,<span class="number">414</span>,<span class="number">63</span>]</span><br><span class="line">        </span><br><span class="line"><span class="comment"># 绘图</span></span><br><span class="line">colors = [<span class="string">'steelblue'</span>,<span class="string">'#9999ff'</span>,<span class="string">'red'</span>,<span class="string">'indianred'</span>,</span><br><span class="line">          <span class="string">'green'</span>,<span class="string">'yellow'</span>,<span class="string">'orange'</span>]</span><br><span class="line">          plot = squarify.plot(sizes = income, <span class="comment"># 指定绘图数据</span></span><br><span class="line">                     label = name, <span class="comment"># 指定标签</span></span><br><span class="line">                     color = colors, <span class="comment"># 指定自定义颜色</span></span><br><span class="line">                     alpha = <span class="number">0.6</span>, <span class="comment"># 指定透明度</span></span><br><span class="line">                     value = income, <span class="comment"># 添加数值标签</span></span><br><span class="line">                     edgecolor = <span class="string">'white'</span>, <span class="comment"># 设置边界框为白色</span></span><br><span class="line">                     linewidth =<span class="number">3</span> <span class="comment"># 设置边框宽度为3</span></span><br><span class="line">                    )</span><br><span class="line">          <span class="comment"># 设置标签大小</span></span><br><span class="line">plt.rc(<span class="string">'font'</span>, size=<span class="number">8</span>)</span><br><span class="line"><span class="comment"># 设置标题大小</span></span><br><span class="line">plot.set_title(<span class="string">'2017年8月中央财政收支情况'</span>,fontdict = &#123;<span class="string">'fontsize'</span>:<span class="number">15</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除坐标轴</span></span><br><span class="line">plt.axis(<span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 去除上边框和右边框刻度</span></span><br><span class="line">plt.tick_params(top = <span class="string">'off'</span>, right = <span class="string">'off'</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><figure class="image-bubble"><div class="img-lightbox"><div class="overlay"></div><img src="https://ws1.sinaimg.cn/large/d71f8b2fgy1fx0miksd7jj20c0080jro.jpg" alt=""></div><div class="image-caption"></div></figure><h1 id="数据文件"><a href="#数据文件" class="headerlink" title="数据文件"></a>数据文件</h1><p><a href="https://pan.baidu.com/s/1hMRJAz0OvsAtYhsbjY4njw" target="_blank" rel="noopener">链接提取码: u6rg</a></p><hr><ul><li>作者：天痕坤</li><li><a href="https://blog.csdn.net/kun1280437633/article/details/80841364" target="_blank" rel="noopener">原文</a></li></ul></div><blockquote class="post-copyright"><div class="content"><span class="post-time">最后更新时间：<time datetime="2021-09-20T03:44:20.274Z" itemprop="dateUpdated">2021-09-20 11:44:20</time></span><br>原始链接：<a href="/posts/PythonMatplotlib.html" target="_blank" rel="external">https://ivitan.com/posts/PythonMatplotlib.html</a></div><footer><a href="https://ivitan.com"><img src="/img/ivitan.png" alt="VITAN"> VITAN</a></footer></blockquote><div class="page-reward"><a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a></div><div class="post-footer"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebCrawler/" rel="tag">WebCrawler</a></li></ul></div><div class="post-ads"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9318335501008303" crossorigin="anonymous"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9318335501008303" data-ad-slot="8390341665" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div><nav class="post-nav flex-row flex-justify-between"><div class="waves-block waves-effect prev"><a href="/posts/PythonSklearnImage.html" id="post-prev" class="post-nav-link"><div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div><h4 class="title">K-means 图片压缩</h4></a></div><div class="waves-block waves-effect next"><a href="/posts/PySpiderMaFengwo.html" id="post-next" class="post-nav-link"><div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div><h4 class="title">PySpider 马蜂窝网景点</h4></a></div></nav><div class="comments vcomment" id="comments"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter((function(e){return GUEST_INFO.indexOf(e)>-1}));new Valine({el:"#comments",notify:!1,verify:!1,appId:"D33WPBHpBw2CjwdWpFvpUhDm-MdYXbMMI",appKey:"MzQtKvSeVPU4nS4ljd3zlbMp",avatar:"wavatar",placeholder:"Just go go.",guest_info:0==guest_info.length?GUEST_INFO:guest_info,pageSize:"10"})</script></article><div id="reward" class="page-modal reward-lay"><a class="close" href="javascript:;"><i class="icon icon-close"></i></a><h3 class="reward-title"><i class="icon icon-quote-left"></i> 感谢支持 <i class="icon icon-quote-right"></i></h3><div class="reward-content"><div class="reward-code"><img id="rewardCode" src="/img/wechat.png" alt="打赏二维码"></div><label class="reward-toggle"><input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.png" data-alipay="/img/alipay.png"><div class="reward-toggle-ctrol"><span class="reward-toggle-item wechat">微信</span> <span class="reward-toggle-item switch" id="switvh">切换</span> <span class="reward-toggle-item alipay">支付宝</span></div></label></div></div><script src="//unpkg.com/jquery@latest/dist/jquery.min.js"></script><script src="/js/clipboard.min.js?v=1.8.5"></script><script src="/js/copy.min.js?v=1.8.5"></script></div><footer class="footer"><div class="top"><p><span id="busuanzi_container_site_uv" style="display:none"><i class="icon icon-user"></i><span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" style="display:none"><i class="icon icon-eye"></i><span id="busuanzi_value_site_pv"></span></span></p><p><span>VITAN &copy; 2017 - 2021</span> <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/ivitan/indigo" target="_blank">Indigo</a></span></p></div><div class="bottom"><p><span><a href="/xml/atom.xml" target="_blank" class="rss" title="RSS"><i class="icon icon-lg icon-rss"></i></a></span> <span>内容遵循 <a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享 署名 - 非商业性 - 相同方式共享 4.0 协议</a></span></p></div></footer></main><div class="mask" id="mask"></div><a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a><script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script><script>var BLOG={ROOT:"/",SHARE:!1,REWARD:!0}</script><script src="/js/main.min.js?v=1.8.5"></script><div class="search-panel" id="search-panel"><ul class="search-result" id="search-result"></ul></div><template id="search-tpl"><li class="item"><a href="{path}" class="waves-block waves-effect"><div class="title ellipsis" title="{title}">{title}</div><div class="flex-row flex-middle"><div class="tags ellipsis">{tags}</div><time class="flex-col time">{date}</time></div></a></li></template><script src="/js/search.min.js?v=1.8.5" async></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>